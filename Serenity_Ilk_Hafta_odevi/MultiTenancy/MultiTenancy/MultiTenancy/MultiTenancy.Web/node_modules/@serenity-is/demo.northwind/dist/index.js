var Hi=Object.create;var bt=Object.defineProperty;var Do=Object.getOwnPropertyDescriptor;var Gi=Object.getOwnPropertyNames,xo=Object.getOwnPropertySymbols,Bi=Object.getPrototypeOf,Co=Object.prototype.hasOwnProperty,Qi=Object.prototype.propertyIsEnumerable;var So=(n,i,e)=>i in n?bt(n,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[i]=e,No=(n,i)=>{for(var e in i||(i={}))Co.call(i,e)&&So(n,e,i[e]);if(xo)for(var e of xo(i))Qi.call(i,e)&&So(n,e,i[e]);return n};var t=(n,i)=>bt(n,"name",{value:i,configurable:!0});var Ki=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports);var Vi=(n,i,e,o)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of Gi(i))!Co.call(n,s)&&s!==e&&bt(n,s,{get:()=>i[s],enumerable:!(o=Do(i,s))||o.enumerable});return n};var Xi=(n,i,e)=>(e=n!=null?Hi(Bi(n)):{},Vi(i||!n||!n.__esModule?bt(e,"default",{value:n,enumerable:!0}):e,n));var f=(n,i,e,o)=>{for(var s=o>1?void 0:o?Do(i,e):i,a=n.length-1,u;a>=0;a--)(u=n[a])&&(s=(o?u(i,e,s):u(s))||s);return o&&s&&bt(i,e,s),s};var I=(n,i,e)=>new Promise((o,s)=>{var a=C=>{try{h(e.next(C))}catch(le){s(le)}},u=C=>{try{h(e.throw(C))}catch(le){s(le)}},h=C=>C.done?o(C.value):Promise.resolve(C.value).then(a,u);h((e=e.apply(n,i)).next())});var Eo=Ki((_r,kr)=>{(function(n,i){typeof _r=="object"&&typeof kr!="undefined"?kr.exports=i():typeof define=="function"&&define.amd?define(i):(n=typeof globalThis!="undefined"?globalThis:n||self,n.DOMPurify=i())})(_r,function(){"use strict";function n(p){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},n(p)}t(n,"_typeof");function i(p,d){return i=Object.setPrototypeOf||t(function(v,R){return v.__proto__=R,v},"_setPrototypeOf"),i(p,d)}t(i,"_setPrototypeOf");function e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(p){return!1}}t(e,"_isNativeReflectConstruct");function o(p,d,m){return e()?o=Reflect.construct:o=t(function(R,w,_){var b=[null];b.push.apply(b,w);var Q=Function.bind.apply(R,b),Ct=new Q;return _&&i(Ct,_.prototype),Ct},"_construct"),o.apply(null,arguments)}t(o,"_construct");function s(p,d){return h(p)||le(p,d)||X(p,d)||Jo()}t(s,"_slicedToArray");function a(p){return u(p)||C(p)||X(p)||fe()}t(a,"_toConsumableArray");function u(p){if(Array.isArray(p))return N(p)}t(u,"_arrayWithoutHoles");function h(p){if(Array.isArray(p))return p}t(h,"_arrayWithHoles");function C(p){if(typeof Symbol!="undefined"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}t(C,"_iterableToArray");function le(p,d){var m=p==null?null:typeof Symbol!="undefined"&&p[Symbol.iterator]||p["@@iterator"];if(m!=null){var v=[],R=!0,w=!1,_,b;try{for(m=m.call(p);!(R=(_=m.next()).done)&&(v.push(_.value),!(d&&v.length===d));R=!0);}catch(Q){w=!0,b=Q}finally{try{!R&&m.return!=null&&m.return()}finally{if(w)throw b}}return v}}t(le,"_iterableToArrayLimit");function X(p,d){if(p){if(typeof p=="string")return N(p,d);var m=Object.prototype.toString.call(p).slice(8,-1);if(m==="Object"&&p.constructor&&(m=p.constructor.name),m==="Map"||m==="Set")return Array.from(p);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return N(p,d)}}t(X,"_unsupportedIterableToArray");function N(p,d){(d==null||d>p.length)&&(d=p.length);for(var m=0,v=new Array(d);m<d;m++)v[m]=p[m];return v}t(N,"_arrayLikeToArray");function fe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t(fe,"_nonIterableSpread");function Jo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t(Jo,"_nonIterableRest");function zo(p,d){var m=typeof Symbol!="undefined"&&p[Symbol.iterator]||p["@@iterator"];if(!m){if(Array.isArray(p)||(m=X(p))||d&&p&&typeof p.length=="number"){m&&(p=m);var v=0,R=t(function(){},"F");return{s:R,n:function(){return v>=p.length?{done:!0}:{done:!1,value:p[v++]}},e:function(Q){throw Q},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=!0,_=!1,b;return{s:function(){m=m.call(p)},n:function(){var Q=m.next();return w=Q.done,Q},e:function(Q){_=!0,b=Q},f:function(){try{!w&&m.return!=null&&m.return()}finally{if(_)throw b}}}}t(zo,"_createForOfIteratorHelper");var Gr=Object.entries,Br=Object.setPrototypeOf,Wo=Object.isFrozen,$o=Object.getPrototypeOf,jo=Object.getOwnPropertyDescriptor,B=Object.freeze,Y=Object.seal,Yo=Object.create,Qr=typeof Reflect!="undefined"&&Reflect,sr=Qr.apply,lr=Qr.construct;sr||(sr=t(function(d,m,v){return d.apply(m,v)},"apply")),B||(B=t(function(d){return d},"freeze")),Y||(Y=t(function(d){return d},"seal")),lr||(lr=t(function(d,m){return o(d,a(m))},"construct"));var Zo=W(Array.prototype.forEach),Kr=W(Array.prototype.pop),Dt=W(Array.prototype.push),Xt=W(String.prototype.toLowerCase),pr=W(String.prototype.toString),ei=W(String.prototype.match),Z=W(String.prototype.replace),ti=W(String.prototype.indexOf),ri=W(String.prototype.trim),J=W(RegExp.prototype.test),ur=oi(TypeError);function W(p){return function(d){for(var m=arguments.length,v=new Array(m>1?m-1:0),R=1;R<m;R++)v[R-1]=arguments[R];return sr(p,d,v)}}t(W,"unapply");function oi(p){return function(){for(var d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];return lr(p,m)}}t(oi,"unconstruct");function g(p,d,m){m=m||Xt,Br&&Br(p,null);for(var v=d.length;v--;){var R=d[v];if(typeof R=="string"){var w=m(R);w!==R&&(Wo(d)||(d[v]=w),R=w)}p[R]=!0}return p}t(g,"addToSet");function nt(p){var d=Yo(null),m=zo(Gr(p)),v;try{for(m.s();!(v=m.n()).done;){var R=s(v.value,2),w=R[0],_=R[1];d[w]=_}}catch(b){m.e(b)}finally{m.f()}return d}t(nt,"clone");function Jt(p,d){for(;p!==null;){var m=jo(p,d);if(m){if(m.get)return W(m.get);if(typeof m.value=="function")return W(m.value)}p=$o(p)}function v(R){return console.warn("fallback value for",R),null}return t(v,"fallbackValue"),v}t(Jt,"lookupGetter");var Vr=B(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),dr=B(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),cr=B(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ii=B(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mr=B(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ni=B(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Xr=B(["#text"]),Jr=B(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),fr=B(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),zr=B(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),zt=B(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ai=Y(/\{\{[\w\W]*|[\w\W]*\}\}/gm),si=Y(/<%[\w\W]*|[\w\W]*%>/gm),li=Y(/\${[\w\W]*}/gm),pi=Y(/^data-[\-\w.\u00B7-\uFFFF]/),ui=Y(/^aria-[\-\w]+$/),di=Y(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ci=Y(/^(?:\w+script|data):/i),mi=Y(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),fi=Y(/^html$/i),yi=t(function(){return typeof window=="undefined"?null:window},"getGlobal"),hi=t(function(d,m){if(n(d)!=="object"||typeof d.createPolicy!="function")return null;var v=null,R="data-tt-policy-suffix";m.currentScript&&m.currentScript.hasAttribute(R)&&(v=m.currentScript.getAttribute(R));var w="dompurify"+(v?"#"+v:"");try{return d.createPolicy(w,{createHTML:t(function(b){return b},"createHTML"),createScriptURL:t(function(b){return b},"createScriptURL")})}catch(_){return console.warn("TrustedTypes policy "+w+" could not be created."),null}},"_createTrustedTypesPolicy");function Wr(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yi(),d=t(function(r){return Wr(r)},"DOMPurify");if(d.version="3.0.1",d.removed=[],!p||!p.document||p.document.nodeType!==9)return d.isSupported=!1,d;var m=p.document,v=p.document,R=p.DocumentFragment,w=p.HTMLTemplateElement,_=p.Node,b=p.Element,Q=p.NodeFilter,Ct=p.NamedNodeMap,gi=Ct===void 0?p.NamedNodeMap||p.MozNamedAttrMap:Ct,Ri=p.HTMLFormElement,xi=p.DOMParser,Wt=p.trustedTypes,$t=b.prototype,Si=Jt($t,"cloneNode"),Di=Jt($t,"nextSibling"),Ci=Jt($t,"childNodes"),yr=Jt($t,"parentNode");if(typeof w=="function"){var hr=v.createElement("template");hr.content&&hr.content.ownerDocument&&(v=hr.content.ownerDocument)}var ee=hi(Wt,m),$r=ee?ee.createHTML(""):"",jt=v,vr=jt.implementation,Ni=jt.createNodeIterator,wi=jt.createDocumentFragment,bi=jt.getElementsByTagName,Ei=m.importNode,pe={};d.isSupported=typeof Gr=="function"&&typeof yr=="function"&&vr&&typeof vr.createHTMLDocument!="undefined";var gr=ai,Rr=si,xr=li,Pi=pi,Ti=ui,Ii=ci,jr=mi,Sr=di,E=null,Yr=g({},[].concat(a(Vr),a(dr),a(cr),a(mr),a(Xr))),P=null,Zr=g({},[].concat(a(Jr),a(fr),a(zr),a(zt))),D=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Nt=null,Dr=null,eo=!0,Cr=!0,to=!1,ro=!0,at=!1,Ne=!1,Nr=!1,wr=!1,st=!1,Yt=!1,Zt=!1,oo=!0,io=!1,Li="user-content-",br=!0,wt=!1,lt={},pt=null,no=g({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ao=null,so=g({},["audio","video","img","source","image","track"]),Er=null,lo=g({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),er="http://www.w3.org/1998/Math/MathML",tr="http://www.w3.org/2000/svg",ye="http://www.w3.org/1999/xhtml",ut=ye,Pr=!1,Tr=null,Oi=g({},[er,tr,ye],pr),we,Ai=["application/xhtml+xml","text/html"],_i="text/html",T,dt=null,ki=v.createElement("form"),po=t(function(r){return r instanceof RegExp||r instanceof Function},"isRegexOrFunction"),Ir=t(function(r){dt&&dt===r||((!r||n(r)!=="object")&&(r={}),r=nt(r),we=Ai.indexOf(r.PARSER_MEDIA_TYPE)===-1?we=_i:we=r.PARSER_MEDIA_TYPE,T=we==="application/xhtml+xml"?pr:Xt,E="ALLOWED_TAGS"in r?g({},r.ALLOWED_TAGS,T):Yr,P="ALLOWED_ATTR"in r?g({},r.ALLOWED_ATTR,T):Zr,Tr="ALLOWED_NAMESPACES"in r?g({},r.ALLOWED_NAMESPACES,pr):Oi,Er="ADD_URI_SAFE_ATTR"in r?g(nt(lo),r.ADD_URI_SAFE_ATTR,T):lo,ao="ADD_DATA_URI_TAGS"in r?g(nt(so),r.ADD_DATA_URI_TAGS,T):so,pt="FORBID_CONTENTS"in r?g({},r.FORBID_CONTENTS,T):no,Nt="FORBID_TAGS"in r?g({},r.FORBID_TAGS,T):{},Dr="FORBID_ATTR"in r?g({},r.FORBID_ATTR,T):{},lt="USE_PROFILES"in r?r.USE_PROFILES:!1,eo=r.ALLOW_ARIA_ATTR!==!1,Cr=r.ALLOW_DATA_ATTR!==!1,to=r.ALLOW_UNKNOWN_PROTOCOLS||!1,ro=r.ALLOW_SELF_CLOSE_IN_ATTR!==!1,at=r.SAFE_FOR_TEMPLATES||!1,Ne=r.WHOLE_DOCUMENT||!1,st=r.RETURN_DOM||!1,Yt=r.RETURN_DOM_FRAGMENT||!1,Zt=r.RETURN_TRUSTED_TYPE||!1,wr=r.FORCE_BODY||!1,oo=r.SANITIZE_DOM!==!1,io=r.SANITIZE_NAMED_PROPS||!1,br=r.KEEP_CONTENT!==!1,wt=r.IN_PLACE||!1,Sr=r.ALLOWED_URI_REGEXP||Sr,ut=r.NAMESPACE||ye,D=r.CUSTOM_ELEMENT_HANDLING||{},r.CUSTOM_ELEMENT_HANDLING&&po(r.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(D.tagNameCheck=r.CUSTOM_ELEMENT_HANDLING.tagNameCheck),r.CUSTOM_ELEMENT_HANDLING&&po(r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(D.attributeNameCheck=r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),r.CUSTOM_ELEMENT_HANDLING&&typeof r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(D.allowCustomizedBuiltInElements=r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),at&&(Cr=!1),Yt&&(st=!0),lt&&(E=g({},a(Xr)),P=[],lt.html===!0&&(g(E,Vr),g(P,Jr)),lt.svg===!0&&(g(E,dr),g(P,fr),g(P,zt)),lt.svgFilters===!0&&(g(E,cr),g(P,fr),g(P,zt)),lt.mathMl===!0&&(g(E,mr),g(P,zr),g(P,zt))),r.ADD_TAGS&&(E===Yr&&(E=nt(E)),g(E,r.ADD_TAGS,T)),r.ADD_ATTR&&(P===Zr&&(P=nt(P)),g(P,r.ADD_ATTR,T)),r.ADD_URI_SAFE_ATTR&&g(Er,r.ADD_URI_SAFE_ATTR,T),r.FORBID_CONTENTS&&(pt===no&&(pt=nt(pt)),g(pt,r.FORBID_CONTENTS,T)),br&&(E["#text"]=!0),Ne&&g(E,["html","head","body"]),E.table&&(g(E,["tbody"]),delete Nt.tbody),B&&B(r),dt=r)},"_parseConfig"),uo=g({},["mi","mo","mn","ms","mtext"]),co=g({},["foreignobject","desc","title","annotation-xml"]),Fi=g({},["title","style","font","a","script"]),rr=g({},dr);g(rr,cr),g(rr,ii);var Lr=g({},mr);g(Lr,ni);var Ui=t(function(r){var l=yr(r);(!l||!l.tagName)&&(l={namespaceURI:ut,tagName:"template"});var c=Xt(r.tagName),x=Xt(l.tagName);return Tr[r.namespaceURI]?r.namespaceURI===tr?l.namespaceURI===ye?c==="svg":l.namespaceURI===er?c==="svg"&&(x==="annotation-xml"||uo[x]):Boolean(rr[c]):r.namespaceURI===er?l.namespaceURI===ye?c==="math":l.namespaceURI===tr?c==="math"&&co[x]:Boolean(Lr[c]):r.namespaceURI===ye?l.namespaceURI===tr&&!co[x]||l.namespaceURI===er&&!uo[x]?!1:!Lr[c]&&(Fi[c]||!rr[c]):!!(we==="application/xhtml+xml"&&Tr[r.namespaceURI]):!1},"_checkValidNamespace"),be=t(function(r){Dt(d.removed,{element:r});try{r.parentNode.removeChild(r)}catch(l){r.remove()}},"_forceRemove"),Or=t(function(r,l){try{Dt(d.removed,{attribute:l.getAttributeNode(r),from:l})}catch(c){Dt(d.removed,{attribute:null,from:l})}if(l.removeAttribute(r),r==="is"&&!P[r])if(st||Yt)try{be(l)}catch(c){}else try{l.setAttribute(r,"")}catch(c){}},"_removeAttribute"),mo=t(function(r){var l,c;if(wr)r="<remove></remove>"+r;else{var x=ei(r,/^[\r\n\t ]+/);c=x&&x[0]}we==="application/xhtml+xml"&&ut===ye&&(r='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+r+"</body></html>");var k=ee?ee.createHTML(r):r;if(ut===ye)try{l=new xi().parseFromString(k,we)}catch(U){}if(!l||!l.documentElement){l=vr.createDocument(ut,"template",null);try{l.documentElement.innerHTML=Pr?$r:k}catch(U){}}var j=l.body||l.documentElement;return r&&c&&j.insertBefore(v.createTextNode(c),j.childNodes[0]||null),ut===ye?bi.call(l,Ne?"html":"body")[0]:Ne?l.documentElement:j},"_initDocument"),fo=t(function(r){return Ni.call(r.ownerDocument||r,r,Q.SHOW_ELEMENT|Q.SHOW_COMMENT|Q.SHOW_TEXT,null,!1)},"_createIterator"),qi=t(function(r){return r instanceof Ri&&(typeof r.nodeName!="string"||typeof r.textContent!="string"||typeof r.removeChild!="function"||!(r.attributes instanceof gi)||typeof r.removeAttribute!="function"||typeof r.setAttribute!="function"||typeof r.namespaceURI!="string"||typeof r.insertBefore!="function"||typeof r.hasChildNodes!="function")},"_isClobbered"),or=t(function(r){return n(_)==="object"?r instanceof _:r&&n(r)==="object"&&typeof r.nodeType=="number"&&typeof r.nodeName=="string"},"_isNode"),he=t(function(r,l,c){pe[r]&&Zo(pe[r],function(x){x.call(d,l,c,dt)})},"_executeHook"),yo=t(function(r){var l;if(he("beforeSanitizeElements",r,null),qi(r))return be(r),!0;var c=T(r.nodeName);if(he("uponSanitizeElement",r,{tagName:c,allowedTags:E}),r.hasChildNodes()&&!or(r.firstElementChild)&&(!or(r.content)||!or(r.content.firstElementChild))&&J(/<[/\w]/g,r.innerHTML)&&J(/<[/\w]/g,r.textContent))return be(r),!0;if(!E[c]||Nt[c]){if(!Nt[c]&&vo(c)&&(D.tagNameCheck instanceof RegExp&&J(D.tagNameCheck,c)||D.tagNameCheck instanceof Function&&D.tagNameCheck(c)))return!1;if(br&&!pt[c]){var x=yr(r)||r.parentNode,k=Ci(r)||r.childNodes;if(k&&x)for(var j=k.length,U=j-1;U>=0;--U)x.insertBefore(Si(k[U],!0),Di(r))}return be(r),!0}return r instanceof b&&!Ui(r)||(c==="noscript"||c==="noembed")&&J(/<\/no(script|embed)/i,r.innerHTML)?(be(r),!0):(at&&r.nodeType===3&&(l=r.textContent,l=Z(l,gr," "),l=Z(l,Rr," "),l=Z(l,xr," "),r.textContent!==l&&(Dt(d.removed,{element:r.cloneNode()}),r.textContent=l)),he("afterSanitizeElements",r,null),!1)},"_sanitizeElements"),ho=t(function(r,l,c){if(oo&&(l==="id"||l==="name")&&(c in v||c in ki))return!1;if(!(Cr&&!Dr[l]&&J(Pi,l))){if(!(eo&&J(Ti,l))){if(!P[l]||Dr[l]){if(!(vo(r)&&(D.tagNameCheck instanceof RegExp&&J(D.tagNameCheck,r)||D.tagNameCheck instanceof Function&&D.tagNameCheck(r))&&(D.attributeNameCheck instanceof RegExp&&J(D.attributeNameCheck,l)||D.attributeNameCheck instanceof Function&&D.attributeNameCheck(l))||l==="is"&&D.allowCustomizedBuiltInElements&&(D.tagNameCheck instanceof RegExp&&J(D.tagNameCheck,c)||D.tagNameCheck instanceof Function&&D.tagNameCheck(c))))return!1}else if(!Er[l]){if(!J(Sr,Z(c,jr,""))){if(!((l==="src"||l==="xlink:href"||l==="href")&&r!=="script"&&ti(c,"data:")===0&&ao[r])){if(!(to&&!J(Ii,Z(c,jr,"")))){if(c)return!1}}}}}}return!0},"_isValidAttribute"),vo=t(function(r){return r.indexOf("-")>0},"_basicCustomElementTest"),go=t(function(r){var l,c,x,k;he("beforeSanitizeAttributes",r,null);var j=r.attributes;if(j){var U={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:P};for(k=j.length;k--;){l=j[k];var z=l,Ee=z.name,Ar=z.namespaceURI;if(c=Ee==="value"?l.value:ri(l.value),x=T(Ee),U.attrName=x,U.attrValue=c,U.keepAttr=!0,U.forceKeepAttr=void 0,he("uponSanitizeAttribute",r,U),c=U.attrValue,!U.forceKeepAttr&&(Or(Ee,r),!!U.keepAttr)){if(!ro&&J(/\/>/i,c)){Or(Ee,r);continue}at&&(c=Z(c,gr," "),c=Z(c,Rr," "),c=Z(c,xr," "));var Ro=T(r.nodeName);if(ho(Ro,x,c)){if(io&&(x==="id"||x==="name")&&(Or(Ee,r),c=Li+c),ee&&n(Wt)==="object"&&typeof Wt.getAttributeType=="function"&&!Ar)switch(Wt.getAttributeType(Ro,x)){case"TrustedHTML":c=ee.createHTML(c);break;case"TrustedScriptURL":c=ee.createScriptURL(c);break}try{Ar?r.setAttributeNS(Ar,Ee,c):r.setAttribute(Ee,c),Kr(d.removed)}catch(_l){}}}}he("afterSanitizeAttributes",r,null)}},"_sanitizeAttributes"),Mi=t(function y(r){var l,c=fo(r);for(he("beforeSanitizeShadowDOM",r,null);l=c.nextNode();)he("uponSanitizeShadowNode",l,null),!yo(l)&&(l.content instanceof R&&y(l.content),go(l));he("afterSanitizeShadowDOM",r,null)},"_sanitizeShadowDOM");return d.sanitize=function(y){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l,c,x,k;if(Pr=!y,Pr&&(y="<!-->"),typeof y!="string"&&!or(y)){if(typeof y.toString!="function")throw ur("toString is not a function");if(y=y.toString(),typeof y!="string")throw ur("dirty is not a string, aborting")}if(!d.isSupported)return y;if(Nr||Ir(r),d.removed=[],typeof y=="string"&&(wt=!1),wt){if(y.nodeName){var j=T(y.nodeName);if(!E[j]||Nt[j])throw ur("root node is forbidden and cannot be sanitized in-place")}}else if(y instanceof _)l=mo("<!---->"),c=l.ownerDocument.importNode(y,!0),c.nodeType===1&&c.nodeName==="BODY"||c.nodeName==="HTML"?l=c:l.appendChild(c);else{if(!st&&!at&&!Ne&&y.indexOf("<")===-1)return ee&&Zt?ee.createHTML(y):y;if(l=mo(y),!l)return st?null:Zt?$r:""}l&&wr&&be(l.firstChild);for(var U=fo(wt?y:l);x=U.nextNode();)yo(x)||(x.content instanceof R&&Mi(x.content),go(x));if(wt)return y;if(st){if(Yt)for(k=wi.call(l.ownerDocument);l.firstChild;)k.appendChild(l.firstChild);else k=l;return(P.shadowroot||P.shadowrootmod)&&(k=Ei.call(m,k,!0)),k}var z=Ne?l.outerHTML:l.innerHTML;return Ne&&E["!doctype"]&&l.ownerDocument&&l.ownerDocument.doctype&&l.ownerDocument.doctype.name&&J(fi,l.ownerDocument.doctype.name)&&(z="<!DOCTYPE "+l.ownerDocument.doctype.name+`>
`+z),at&&(z=Z(z,gr," "),z=Z(z,Rr," "),z=Z(z,xr," ")),ee&&Zt?ee.createHTML(z):z},d.setConfig=function(y){Ir(y),Nr=!0},d.clearConfig=function(){dt=null,Nr=!1},d.isValidAttribute=function(y,r,l){dt||Ir({});var c=T(y),x=T(r);return ho(c,x,l)},d.addHook=function(y,r){typeof r=="function"&&(pe[y]=pe[y]||[],Dt(pe[y],r))},d.removeHook=function(y){if(pe[y])return Kr(pe[y])},d.removeHooks=function(y){pe[y]&&(pe[y]=[])},d.removeAllHooks=function(){pe={}},d}t(Wr,"createDOMPurify");var vi=Wr();return vi})});import{Decorators as Fs,EntityDialog as Us}from"@serenity-is/corelib";import{ColumnsBase as Ji,fieldsProxy as zi}from"@serenity-is/corelib";var Pe=class extends Ji{};t(Pe,"CategoryColumns"),Pe.columnsKey="Northwind.Category",Pe.Fields=zi();import{StringEditor as Wi,PrefixedContext as $i,initFormType as ji}from"@serenity-is/corelib";var Et=class extends $i{constructor(i){if(super(i),!Et.init){Et.init=!0;var e=Wi;ji(Et,["CategoryName",e,"Description",e])}}},Te=Et;t(Te,"CategoryForm"),Te.formKey="Northwind.Category";import{fieldsProxy as Yi}from"@serenity-is/corelib";var te=class{};t(te,"CategoryLangRow"),te.idProperty="Id",te.nameProperty="CategoryName",te.localTextPrefix="Northwind.CategoryLang",te.deletePermission="Northwind:General",te.insertPermission="Northwind:General",te.readPermission="Northwind:General",te.updatePermission="Northwind:General",te.Fields=Yi();import{serviceRequest as Zi}from"@serenity-is/corelib";var wo;(e=>(e.baseUrl="Serenity.Demo.Northwind/CategoryLang",e.Methods={Create:"Serenity.Demo.Northwind/CategoryLang/Create",Update:"Serenity.Demo.Northwind/CategoryLang/Update",Delete:"Serenity.Demo.Northwind/CategoryLang/Delete",Retrieve:"Serenity.Demo.Northwind/CategoryLang/Retrieve",List:"Serenity.Demo.Northwind/CategoryLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(s,a,u){return Zi(e.baseUrl+"/"+o,s,a,u)}})))(wo||(wo={}));import{getLookup as en,getLookupAsync as tn,fieldsProxy as rn}from"@serenity-is/corelib";var L=class{static getLookup(){return en("Northwind.Category")}static getLookupAsync(){return I(this,null,function*(){return tn("Northwind.Category")})}};t(L,"CategoryRow"),L.idProperty="CategoryID",L.nameProperty="CategoryName",L.localTextPrefix="Northwind.Category",L.lookupKey="Northwind.Category",L.deletePermission="Northwind:General",L.insertPermission="Northwind:General",L.readPermission="Northwind:General",L.updatePermission="Northwind:General",L.Fields=rn();import{serviceRequest as on}from"@serenity-is/corelib";var ct;(e=>(e.baseUrl="Serenity.Demo.Northwind/Category",e.Methods={Create:"Serenity.Demo.Northwind/Category/Create",Update:"Serenity.Demo.Northwind/Category/Update",Delete:"Serenity.Demo.Northwind/Category/Delete",Retrieve:"Serenity.Demo.Northwind/Category/Retrieve",List:"Serenity.Demo.Northwind/Category/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(s,a,u){return on(e.baseUrl+"/"+o,s,a,u)}})))(ct||(ct={}));import{Decorators as nn}from"@serenity-is/corelib";var Pt,Tt,mt=class{format(i){let e=i.value;if(!e||!e.length)return"";let o=Pt==null?void 0:Pt.itemById;return o?e.map(s=>{var a=o[s];return i.escape(a==null?s:a.FullName)}).join(", "):(Tt!=null||(Tt=K.getLookupAsync().then(s=>{var a;Pt=s;try{(a=i.grid)==null||a.invalidate()}finally{Pt=null,Tt=null}}).catch(()=>Tt=null)),'<i class="fa fa-spinner"></i>')}};t(mt,"EmployeeListFormatter"),mt=f([nn.registerFormatter("Serenity.Demo.Northwind.EmployeeListFormatter")],mt);import{ColumnsBase as an,fieldsProxy as sn}from"@serenity-is/corelib";var Ie=class extends an{};t(Ie,"CustomerColumns"),Ie.columnsKey="Northwind.Customer",Ie.Fields=sn();import{fieldsProxy as ln}from"@serenity-is/corelib";var re=class{};t(re,"CustomerCustomerDemoRow"),re.idProperty="ID",re.nameProperty="CustomerID",re.localTextPrefix="Northwind.CustomerCustomerDemo",re.deletePermission="Northwind:General",re.insertPermission="Northwind:General",re.readPermission="Northwind:General",re.updatePermission="Northwind:General",re.Fields=ln();import{fieldsProxy as pn}from"@serenity-is/corelib";var oe=class{};t(oe,"CustomerDemographicRow"),oe.idProperty="ID",oe.nameProperty="CustomerTypeID",oe.localTextPrefix="Northwind.CustomerDemographic",oe.deletePermission="Northwind:General",oe.insertPermission="Northwind:General",oe.readPermission="Northwind:General",oe.updatePermission="Northwind:General",oe.Fields=pn();import{fieldsProxy as un}from"@serenity-is/corelib";var ie=class{};t(ie,"CustomerDetailsRow"),ie.idProperty="Id",ie.nameProperty="Email",ie.localTextPrefix="Northwind.CustomerDetails",ie.deletePermission="Northwind:General",ie.insertPermission="Northwind:General",ie.readPermission="Northwind:General",ie.updatePermission="Northwind:General",ie.Fields=un();import{Decorators as Po,IGetEditValue as fn,ISetEditValue as yn,TemplatedWidget as hn,Toolbar as vn}from"@serenity-is/corelib";import{Authorization as gn,coalesce as Rn,confirmDialog as xn,formatDate as Sn,formatISODateTimeUTC as Dn,insert as Cn,trimToNull as To}from"@serenity-is/corelib";import{Decorators as dn,HtmlNoteContentEditor as cn,TemplatedDialog as mn}from"@serenity-is/corelib";import{localText as bo}from"@serenity-is/corelib";var ge=class extends mn{constructor(){super();this.textEditor=new cn(this.byId("Text"))}getTemplate(){return"<form id='~_Form' class='s-Form'><textarea id='~_Text' class='required'></textarea></form>"}getDialogButtons(){return[{text:bo("Dialogs.OkButton"),click:()=>{this.validateForm()&&this.okClick&&this.okClick()}},{text:bo("Dialogs.CancelButton"),click:()=>this.dialogClose()}]}get text(){return this.textEditor.value}set text(e){this.textEditor.value=e}};t(ge,"NoteDialog"),ge=f([dn.registerClass("Serenity.Demo.Northwind.NoteDialog")],ge);var Io=Xi(Eo(),1);var Le=class extends hn{constructor(e){super(e);new vn(this.byId("Toolbar"),{buttons:[{title:"Add Note",cssClass:"add-button",onClick:o=>{o.preventDefault(),this.addClick()}}]})}getTemplate(){return"<div><div id='~_Toolbar'></div><ul id='~_NoteList'></ul></div>"}updateContent(){var e=this.byId("NoteList");if(e.children().remove(),this.items)for(var o=0,s=0;s<this.items.length;s++){var a=this.items[s],u=$("<li/>");$("<div/>").addClass("note-text").html(Io.sanitize(Rn(a.Text,""))).appendTo(u),$("<a/>").attr("href","#").addClass("note-date").text(a.InsertUserDisplayName+" - "+Sn(a.InsertDate,"g")).data("index",o).appendTo(u).click(h=>this.editClick(h)),$("<a/>").attr("href","#").addClass("note-delete").attr("title","delete note").data("index",o).appendTo(u).click(h=>this.deleteClick(h)),u.appendTo(e),o++}}addClick(){var e=new ge;e.dialogTitle="Add Note",e.okClick=()=>{var o=To(e.text);o!=null&&(this.items=this.items||[],Cn(this.items,0,{Text:o,InsertUserDisplayName:gn.userDefinition.DisplayName,InsertDate:Dn(new Date)}),this.updateContent(),e.dialogClose(),this.set_isDirty(!0),this.onChange&&this.onChange())},e.dialogOpen()}editClick(e){e.preventDefault();var o=$(e.target).data("index"),s=this.items[o],a=new ge;a.dialogTitle="Edit Note",a.text=s.Text,a.okClick=()=>{var u=To(a.text);u&&(this.items[o].Text=u,this.updateContent(),a.dialogClose(),this.set_isDirty(!0),this.onChange&&this.onChange())},a.dialogOpen()}deleteClick(e){e.preventDefault();var o=$(e.target).data("index");xn("Delete this note?",()=>{this.items.splice(o,1),this.updateContent(),this.set_isDirty(!0),this.onChange&&this.onChange()})}get value(){return this.items}set value(e){this.items=e||[],this.set_isDirty(!1),this.updateContent()}getEditValue(e,o){o[e.name]=this.value}setEditValue(e,o){this.value=e[o.name]||[]}get_isDirty(){return this.isDirty}set_isDirty(e){this.isDirty=e}};t(Le,"NotesEditor"),Le=f([Po.registerEditor("Serenity.Demo.Northwind.NotesEditor",[fn,yn]),Po.element("<div/>")],Le);import{StringEditor as Nn,LookupEditor as wn,DateEditor as bn,EmailAddressEditor as En,BooleanEditor as Pn,PrefixedContext as Tn,initFormType as In}from"@serenity-is/corelib";var It=class extends Tn{constructor(i){if(super(i),!It.init){It.init=!0;var e=Nn,o=wn,s=Le,a=bn,u=En,h=Pn;In(It,["CustomerID",e,"CompanyName",e,"ContactName",e,"ContactTitle",e,"Representatives",o,"Address",e,"Country",o,"City",o,"Region",e,"PostalCode",e,"Phone",e,"Fax",e,"NoteList",s,"LastContactDate",a,"LastContactedBy",o,"Email",u,"SendBulletin",h])}}},Oe=It;t(Oe,"CustomerForm"),Oe.formKey="Northwind.Customer";import{fieldsProxy as Ln}from"@serenity-is/corelib";var ue=class{};t(ue,"CustomerGrossSalesRow"),ue.nameProperty="ContactName",ue.localTextPrefix="Northwind.CustomerGrossSales",ue.deletePermission="Northwind:General",ue.insertPermission="Northwind:General",ue.readPermission="Northwind:General",ue.updatePermission="Northwind:General",ue.Fields=Ln();import{fieldsProxy as On}from"@serenity-is/corelib";var de=class{};t(de,"CustomerRepresentativesRow"),de.idProperty="RepresentativeId",de.localTextPrefix="Northwind.CustomerRepresentatives",de.deletePermission="Northwind:Customer:View",de.insertPermission="Northwind:Customer:View",de.readPermission="Northwind:Customer:View",de.updatePermission="Northwind:Customer:View",de.Fields=On();import{getLookup as An,getLookupAsync as _n,fieldsProxy as kn}from"@serenity-is/corelib";var q=class{static getLookup(){return An("Northwind.Customer")}static getLookupAsync(){return I(this,null,function*(){return _n("Northwind.Customer")})}};t(q,"CustomerRow"),q.idProperty="ID",q.nameProperty="CompanyName",q.localTextPrefix="Northwind.Customer",q.lookupKey="Northwind.Customer",q.deletePermission="Northwind:Customer:Delete",q.insertPermission="Northwind:Customer:Modify",q.readPermission="Northwind:Customer:View",q.updatePermission="Northwind:Customer:Modify",q.Fields=kn();import{serviceRequest as Fn}from"@serenity-is/corelib";var ft;(e=>(e.baseUrl="Serenity.Demo.Northwind/Customer",e.Methods={Create:"Serenity.Demo.Northwind/Customer/Create",Update:"Serenity.Demo.Northwind/Customer/Update",Delete:"Serenity.Demo.Northwind/Customer/Delete",GetNextNumber:"Serenity.Demo.Northwind/Customer/GetNextNumber",Retrieve:"Serenity.Demo.Northwind/Customer/Retrieve",List:"Serenity.Demo.Northwind/Customer/List"},["Create","Update","Delete","GetNextNumber","Retrieve","List"].forEach(o=>{e[o]=function(s,a,u){return Fn(e.baseUrl+"/"+o,s,a,u)}})))(ft||(ft={}));import{getLookup as Un,getLookupAsync as qn,fieldsProxy as Mn}from"@serenity-is/corelib";var K=class{static getLookup(){return Un("Northwind.Employee")}static getLookupAsync(){return I(this,null,function*(){return qn("Northwind.Employee")})}};t(K,"EmployeeRow"),K.idProperty="EmployeeID",K.nameProperty="FullName",K.localTextPrefix="Northwind.Employee",K.lookupKey="Northwind.Employee",K.deletePermission="Northwind:General",K.insertPermission="Northwind:General",K.readPermission="Northwind:General",K.updatePermission="Northwind:General",K.Fields=Mn();import{fieldsProxy as Hn}from"@serenity-is/corelib";var ne=class{};t(ne,"EmployeeTerritoryRow"),ne.idProperty="EmployeeID",ne.nameProperty="TerritoryID",ne.localTextPrefix="Northwind.EmployeeTerritory",ne.deletePermission="Northwind:General",ne.insertPermission="Northwind:General",ne.readPermission="Northwind:General",ne.updatePermission="Northwind:General",ne.Fields=Hn();import{Decorators as Gn}from"@serenity-is/corelib";var Fr=(e=>(e[e.Male=1]="Male",e[e.Female=2]="Female",e))(Fr||{});Gn.registerEnumType(Fr,"Serenity.Demo.Northwind.Gender");import{fieldsProxy as Bn}from"@serenity-is/corelib";var ae=class{};t(ae,"NoteRow"),ae.idProperty="NoteId",ae.nameProperty="EntityType",ae.localTextPrefix="Northwind.Note",ae.deletePermission="Northwind:General",ae.insertPermission="Northwind:General",ae.readPermission="Northwind:General",ae.updatePermission="Northwind:General",ae.Fields=Bn();import{Decorators as Lo,IInitializeColumn as Qn,ISlickFormatter as Kn}from"@serenity-is/corelib";import{htmlEncode as Vn,isTrimmedEmpty as Xn}from"@serenity-is/corelib";var Ae=class{format(i){var e=Vn(i.value);if(!this.genderProperty||Xn(i.value))return e;var o=i.item[this.genderProperty];return'<i class="fa fa-'+(o===2?"female text-danger":"male text-primary")+' text-opacity-75"></i>'+e}initializeColumn(i){i.referencedFields=i.referencedFields||[],this.genderProperty&&i.referencedFields.push(this.genderProperty)}};t(Ae,"EmployeeFormatter"),f([Lo.option()],Ae.prototype,"genderProperty",2),Ae=f([Lo.registerFormatter("Serenity.Demo.Northwind.EmployeeFormatter",[Kn,Qn])],Ae);import{Decorators as Jn}from"@serenity-is/corelib";import{htmlEncode as zn}from"@serenity-is/corelib";var yt=class{format(i){return i.value==null?"":zn(i.value)+' <i class="icon fa fa-balance-scale text-secondary text-opacity-75"></i>'}};t(yt,"FreightFormatter"),yt=f([Jn.registerFormatter("Serenity.Demo.Northwind.FreightFormatter")],yt);import{Decorators as Wn}from"@serenity-is/corelib";import{htmlEncode as Oo}from"@serenity-is/corelib";var ht=class{format(i){return i.value?'<i class="text-info fa fa-'+(i.value=="Speedy Express"?"plane":i.value=="Federal Shipping"?"ship":"truck")+' text-opacity-75"></i> '+Oo(i.value):Oo(i.value)}};t(ht,"ShipperFormatter"),ht=f([Wn.registerFormatter("Serenity.Demo.Northwind.ShipperFormatter")],ht);import{ColumnsBase as jn,fieldsProxy as Yn}from"@serenity-is/corelib";import{Decorators as $n}from"@serenity-is/corelib";var Ur=(e=>(e[e.NotShipped=0]="NotShipped",e[e.Shipped=1]="Shipped",e))(Ur||{});$n.registerEnumType(Ur,"Serenity.Demo.Northwind.OrderShippingState","Northwind.OrderShippingState");var _e=class extends jn{};t(_e,"OrderColumns"),_e.columnsKey="Northwind.Order",_e.Fields=Yn();import{ColumnsBase as Zn,fieldsProxy as ea}from"@serenity-is/corelib";var ke=class extends Zn{};t(ke,"OrderDetailColumns"),ke.columnsKey="Northwind.OrderDetail",ke.Fields=ea();import{LookupEditor as ta,DecimalEditor as ra,IntegerEditor as oa,PrefixedContext as ia,initFormType as na}from"@serenity-is/corelib";var Lt=class extends ia{constructor(i){if(super(i),!Lt.init){Lt.init=!0;var e=ta,o=ra,s=oa;na(Lt,["ProductID",e,"UnitPrice",o,"Quantity",s,"Discount",o])}}},Fe=Lt;t(Fe,"OrderDetailForm"),Fe.formKey="Northwind.OrderDetail";import{fieldsProxy as aa}from"@serenity-is/corelib";var V=class{};t(V,"OrderDetailRow"),V.idProperty="DetailID",V.localTextPrefix="Northwind.OrderDetail",V.deletePermission="Northwind:General",V.insertPermission="Northwind:General",V.readPermission="Northwind:General",V.updatePermission="Northwind:General",V.Fields=aa();import{serviceRequest as sa}from"@serenity-is/corelib";var Ao;(e=>(e.baseUrl="Serenity.Demo.Northwind/OrderDetail",e.Methods={Retrieve:"Serenity.Demo.Northwind/OrderDetail/Retrieve",List:"Serenity.Demo.Northwind/OrderDetail/List"},["Retrieve","List"].forEach(o=>{e[o]=function(s,a,u){return sa(e.baseUrl+"/"+o,s,a,u)}})))(Ao||(Ao={}));import{Decorators as la,LookupEditorBase as pa}from"@serenity-is/corelib";var Ue=class extends pa{constructor(i,e){super(i,No({async:!0},e))}getLookupKey(){return"Northwind.Customer"}getItemText(i,e){return super.getItemText(i,e)+" ["+i.CustomerID+"]"}};t(Ue,"CustomerEditor"),Ue=f([la.registerEditor("Serenity.Demo.Northwind.CustomerEditor")],Ue);import{Decorators as ma}from"@serenity-is/corelib";import{alertDialog as fa,toId as ya,tryFirst as ha}from"@serenity-is/corelib";import{GridEditorBase as va}from"@serenity-is/extensions";import{Decorators as ua}from"@serenity-is/corelib";import{toId as da}from"@serenity-is/corelib";import{GridEditorDialog as ca}from"@serenity-is/extensions";var qe=class extends ca{constructor(){super();this.form=new Fe(this.idPrefix),this.form.ProductID.changeSelect2(e=>I(this,null,function*(){var o=da(this.form.ProductID.value);o!=null&&(this.form.UnitPrice.value=(yield S.getLookupAsync()).itemById[o].UnitPrice)})),this.form.Discount.addValidationRule(this.uniqueName,e=>{var o=this.form.UnitPrice.value,s=this.form.Quantity.value,a=this.form.Discount.value;if(o!=null&&s!=null&&a!=null&&a>0&&a>=o*s)return"Discount can't be higher than total price!"})}getFormKey(){return Fe.formKey}getLocalTextPrefix(){return V.localTextPrefix}};t(qe,"OrderDetailDialog"),qe=f([ua.registerClass()],qe);var Me=class extends va{getColumnsKey(){return ke.columnsKey}getDialogType(){return qe}getLocalTextPrefix(){return V.localTextPrefix}constructor(i){super(i)}validateEntity(i,e){i.ProductID=ya(i.ProductID);var o=ha(this.view.getItems(),s=>s.ProductID===i.ProductID);return o&&this.id(o)!==e?(fa("This product is already in order details!"),!1):(e!=null||(e=i[this.getIdProperty()]),S.getLookupAsync().then(s=>{var u,h;var a=(h=(u=this.view)==null?void 0:u.getItemById)==null?void 0:h.call(u,e);a&&(a.ProductName=s.itemById[i.ProductID].ProductName,this.view.updateItem(e,a))}),i.LineTotal=(i.Quantity||0)*(i.UnitPrice||0)-(i.Discount||0),!0)}};t(Me,"OrderDetailsEditor"),Me=f([ma.registerEditor("Serenity.Demo.Northwind.OrderDetailsEditor")],Me);import{DateEditor as ga,LookupEditor as Ra,DecimalEditor as xa,StringEditor as Sa,PrefixedContext as Da,initFormType as Ca}from"@serenity-is/corelib";var Ot=class extends Da{constructor(i){if(super(i),!Ot.init){Ot.init=!0;var e=Ue,o=ga,s=Ra,a=Me,u=xa,h=Sa;Ca(Ot,["CustomerID",e,"OrderDate",o,"RequiredDate",o,"EmployeeID",s,"DetailList",a,"ShippedDate",o,"ShipVia",s,"Freight",u,"ShipName",h,"ShipAddress",h,"ShipCity",h,"ShipRegion",h,"ShipPostalCode",h,"ShipCountry",h])}}},He=Ot;t(He,"OrderForm"),He.formKey="Northwind.Order";import{fieldsProxy as Na}from"@serenity-is/corelib";var O=class{};t(O,"OrderRow"),O.idProperty="OrderID",O.nameProperty="CustomerID",O.localTextPrefix="Northwind.Order",O.deletePermission="Northwind:General",O.insertPermission="Northwind:General",O.readPermission="Northwind:General",O.updatePermission="Northwind:General",O.Fields=Na();import{serviceRequest as wa}from"@serenity-is/corelib";var Ge;(e=>(e.baseUrl="Serenity.Demo.Northwind/Order",e.Methods={Create:"Serenity.Demo.Northwind/Order/Create",Update:"Serenity.Demo.Northwind/Order/Update",Delete:"Serenity.Demo.Northwind/Order/Delete",Retrieve:"Serenity.Demo.Northwind/Order/Retrieve",List:"Serenity.Demo.Northwind/Order/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(s,a,u){return wa(e.baseUrl+"/"+o,s,a,u)}})))(Ge||(Ge={}));var _o;(e=>{e.General="Northwind:General";let i;(u=>(u.Delete="Northwind:Customer:Delete",u.Modify="Northwind:Customer:Modify",u.View="Northwind:Customer:View"))(i=e.Customer||(e.Customer={}))})(_o||(_o={}));import{ColumnsBase as ba,fieldsProxy as Ea}from"@serenity-is/corelib";var Re=class extends ba{};t(Re,"ProductColumns"),Re.columnsKey="Northwind.Product",Re.Fields=Ea();import{Decorators as Pa,EntityDialog as Ta}from"@serenity-is/corelib";var xe=class extends Ta{constructor(){super(...arguments);this.form=new Be(this.idPrefix)}getFormKey(){return Be.formKey}getRowDefinition(){return A}getService(){return vt.baseUrl}};t(xe,"SupplierDialog"),xe=f([Pa.registerClass("Serenity.Demo.Northwind.SupplierDialog")],xe);import{StringEditor as Ia,ImageUploadEditor as La,BooleanEditor as Oa,LookupEditor as Aa,DecimalEditor as _a,IntegerEditor as ka,PrefixedContext as Fa,initFormType as Ua}from"@serenity-is/corelib";var At=class extends Fa{constructor(i){if(super(i),!At.init){At.init=!0;var e=Ia,o=La,s=Oa,a=Aa,u=_a,h=ka;Ua(At,["ProductName",e,"ProductImage",o,"Discontinued",s,"SupplierID",a,"CategoryID",a,"QuantityPerUnit",e,"UnitPrice",u,"UnitsInStock",h,"UnitsOnOrder",h,"ReorderLevel",h])}}},Qe=At;t(Qe,"ProductForm"),Qe.formKey="Northwind.Product";import{fieldsProxy as qa}from"@serenity-is/corelib";var se=class{};t(se,"ProductLangRow"),se.idProperty="Id",se.nameProperty="ProductName",se.localTextPrefix="Northwind.ProductLang",se.deletePermission="Northwind:General",se.insertPermission="Northwind:General",se.readPermission="Northwind:General",se.updatePermission="Northwind:General",se.Fields=qa();import{serviceRequest as Ma}from"@serenity-is/corelib";var ko;(e=>(e.baseUrl="Serenity.Demo.Northwind/ProductLang",e.Methods={Create:"Serenity.Demo.Northwind/ProductLang/Create",Update:"Serenity.Demo.Northwind/ProductLang/Update",Delete:"Serenity.Demo.Northwind/ProductLang/Delete",Retrieve:"Serenity.Demo.Northwind/ProductLang/Retrieve",List:"Serenity.Demo.Northwind/ProductLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(s,a,u){return Ma(e.baseUrl+"/"+o,s,a,u)}})))(ko||(ko={}));import{fieldsProxy as Ha}from"@serenity-is/corelib";var ce=class{};t(ce,"ProductLogRow"),ce.idProperty="ProductLogID",ce.localTextPrefix="Northwind.ProductLog",ce.deletePermission=null,ce.insertPermission=null,ce.readPermission="",ce.updatePermission=null,ce.Fields=Ha();import{getLookup as Ga,getLookupAsync as Ba,fieldsProxy as Qa}from"@serenity-is/corelib";var S=class{static getLookup(){return Ga("Northwind.Product")}static getLookupAsync(){return I(this,null,function*(){return Ba("Northwind.Product")})}};t(S,"ProductRow"),S.idProperty="ProductID",S.nameProperty="ProductName",S.localTextPrefix="Northwind.Product",S.lookupKey="Northwind.Product",S.deletePermission="Northwind:General",S.insertPermission="Northwind:General",S.readPermission="Northwind:General",S.updatePermission="Northwind:General",S.Fields=Qa();import{serviceRequest as Ka}from"@serenity-is/corelib";var De;(e=>(e.baseUrl="Serenity.Demo.Northwind/Product",e.Methods={Create:"Serenity.Demo.Northwind/Product/Create",Update:"Serenity.Demo.Northwind/Product/Update",Delete:"Serenity.Demo.Northwind/Product/Delete",Retrieve:"Serenity.Demo.Northwind/Product/Retrieve",List:"Serenity.Demo.Northwind/Product/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(s,a,u){return Ka(e.baseUrl+"/"+o,s,a,u)}})))(De||(De={}));import{ColumnsBase as Va,fieldsProxy as Xa}from"@serenity-is/corelib";var Ke=class extends Va{};t(Ke,"RegionColumns"),Ke.columnsKey="Northwind.Region",Ke.Fields=Xa();import{IntegerEditor as Ja,StringEditor as za,PrefixedContext as Wa,initFormType as $a}from"@serenity-is/corelib";var _t=class extends Wa{constructor(i){if(super(i),!_t.init){_t.init=!0;var e=Ja,o=za;$a(_t,["RegionID",e,"RegionDescription",o])}}},Ve=_t;t(Ve,"RegionForm"),Ve.formKey="Northwind.Region";import{getLookup as ja,getLookupAsync as Ya,fieldsProxy as Za}from"@serenity-is/corelib";var M=class{static getLookup(){return ja("Northwind.Region")}static getLookupAsync(){return I(this,null,function*(){return Ya("Northwind.Region")})}};t(M,"RegionRow"),M.idProperty="RegionID",M.nameProperty="RegionDescription",M.localTextPrefix="Northwind.Region",M.lookupKey="Northwind.Region",M.deletePermission="Northwind:General",M.insertPermission="Northwind:General",M.readPermission="Northwind:General",M.updatePermission="Northwind:General",M.Fields=Za();import{serviceRequest as es}from"@serenity-is/corelib";var gt;(e=>(e.baseUrl="Serenity.Demo.Northwind/Region",e.Methods={Create:"Serenity.Demo.Northwind/Region/Create",Update:"Serenity.Demo.Northwind/Region/Update",Delete:"Serenity.Demo.Northwind/Region/Delete",Retrieve:"Serenity.Demo.Northwind/Region/Retrieve",List:"Serenity.Demo.Northwind/Region/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(s,a,u){return es(e.baseUrl+"/"+o,s,a,u)}})))(gt||(gt={}));import{ColumnsBase as ts,fieldsProxy as rs}from"@serenity-is/corelib";var kt=class extends ts{};t(kt,"SalesByCategoryColumns"),kt.columnsKey="Northwind.SalesByCategory",kt.Fields=rs();import{fieldsProxy as os}from"@serenity-is/corelib";var me=class{};t(me,"SalesByCategoryRow"),me.nameProperty="CategoryName",me.localTextPrefix="Northwind.SalesByCategory",me.deletePermission="Northwind:General",me.insertPermission="Northwind:General",me.readPermission="Northwind:General",me.updatePermission="Northwind:General",me.Fields=os();import{serviceRequest as is}from"@serenity-is/corelib";var Fo;(e=>(e.baseUrl="Serenity.Demo.Northwind/SalesByCategory",e.Methods={List:"Serenity.Demo.Northwind/SalesByCategory/List"},["List"].forEach(o=>{e[o]=function(s,a,u){return is(e.baseUrl+"/"+o,s,a,u)}})))(Fo||(Fo={}));import{ColumnsBase as ns,fieldsProxy as as}from"@serenity-is/corelib";var Xe=class extends ns{};t(Xe,"ShipperColumns"),Xe.columnsKey="Northwind.Shipper",Xe.Fields=as();import{Decorators as Uo,StringEditor as ss,WX as ls}from"@serenity-is/corelib";import{isEmptyOrNull as qo,replaceAll as Ce,startsWith as ir,localText as ps,trimToNull as qr}from"@serenity-is/corelib";var F=class extends ss{constructor(e){super(e);this.addValidationRule(this.uniqueName,o=>{var s=qr(this.get_value());return s==null?null:F.validate(s,this.multiple)}),e.bind("change",o=>{ls.hasOriginalEvent(o)&&this.formatValue()}),e.bind("blur",o=>{this.element.hasClass("valid")&&this.formatValue()})}formatValue(){this.element.val(this.getFormattedValue())}getFormattedValue(){var e=this.element.val();return this.multiple?F.formatMulti(e,F.formatPhone):F.formatPhone(e)}get_value(){return this.getFormattedValue()}set_value(e){this.element.val(e)}static validate(e,o){var s=o?F.isValidMulti(e,F.isValidPhone):F.isValidPhone(e);return s?null:ps(o?"Validation.NorthwindPhoneMultiple":"Validation.NorthwindPhone")}static isValidPhone(e){if(qo(e)||(e=Ce(Ce(e," ",""),"-",""),e.length<10)||(ir(e,"0")&&(e=e.substring(1)),ir(e,"(")&&e.charAt(4)===")"&&(e=e.substr(1,3)+e.substring(5)),e.length!==10)||ir(e,"0"))return!1;for(var o=0;o<e.length;o++){var s=e.charAt(o);if(s<"0"||s>"9")return!1}return!0}static formatPhone(e){return F.isValidPhone(e)&&(e=Ce(Ce(Ce(Ce(e," ",""),"-",""),"(",""),")",""),ir(e,"0")&&(e=e.substring(1)),e="("+e.substr(0,3)+") "+e.substr(3,3)+"-"+e.substr(6,2)+e.substr(8,2)),e}static formatMulti(e,o){var s=Ce(e,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44)),a="";for(var u of s){var h=qr(u);h!=null&&(a.length>0&&(a+=", "),a+=o(h))}return a}static isValidMulti(e,o){if(qo(e))return!1;for(var s=Ce(e,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44)),a=!1,u=0;u<s.length;u++){var h=s[u],C=qr(h);if(C!=null){if(!o(C))return!1;a=!0}}return!!a}};t(F,"PhoneEditor"),f([Uo.option()],F.prototype,"multiple",2),F=f([Uo.registerEditor("Serenity.Demo.Northwind.PhoneEditor")],F);import{StringEditor as us,PrefixedContext as ds,initFormType as cs}from"@serenity-is/corelib";var Ft=class extends ds{constructor(i){if(super(i),!Ft.init){Ft.init=!0;var e=us,o=F;cs(Ft,["CompanyName",e,"Phone",o])}}},Je=Ft;t(Je,"ShipperForm"),Je.formKey="Northwind.Shipper";import{getLookup as ms,getLookupAsync as fs,fieldsProxy as ys}from"@serenity-is/corelib";var H=class{static getLookup(){return ms("Northwind.Shipper")}static getLookupAsync(){return I(this,null,function*(){return fs("Northwind.Shipper")})}};t(H,"ShipperRow"),H.idProperty="ShipperID",H.nameProperty="CompanyName",H.localTextPrefix="Northwind.Shipper",H.lookupKey="Northwind.Shipper",H.deletePermission="Northwind:General",H.insertPermission="Northwind:General",H.readPermission="Northwind:General",H.updatePermission="Northwind:General",H.Fields=ys();import{serviceRequest as hs}from"@serenity-is/corelib";var Rt;(e=>(e.baseUrl="Serenity.Demo.Northwind/Shipper",e.Methods={Create:"Serenity.Demo.Northwind/Shipper/Create",Update:"Serenity.Demo.Northwind/Shipper/Update",Delete:"Serenity.Demo.Northwind/Shipper/Delete",Retrieve:"Serenity.Demo.Northwind/Shipper/Retrieve",List:"Serenity.Demo.Northwind/Shipper/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(s,a,u){return hs(e.baseUrl+"/"+o,s,a,u)}})))(Rt||(Rt={}));import{ColumnsBase as vs,fieldsProxy as gs}from"@serenity-is/corelib";var ze=class extends vs{};t(ze,"SupplierColumns"),ze.columnsKey="Northwind.Supplier",ze.Fields=gs();import{StringEditor as Rs,PrefixedContext as xs,initFormType as Ss}from"@serenity-is/corelib";var Ut=class extends xs{constructor(i){if(super(i),!Ut.init){Ut.init=!0;var e=Rs;Ss(Ut,["CompanyName",e,"ContactName",e,"ContactTitle",e,"Address",e,"Region",e,"PostalCode",e,"Country",e,"City",e,"Phone",e,"Fax",e,"HomePage",e])}}},Be=Ut;t(Be,"SupplierForm"),Be.formKey="Northwind.Supplier";import{getLookup as Ds,getLookupAsync as Cs,fieldsProxy as Ns}from"@serenity-is/corelib";var A=class{static getLookup(){return Ds("Northwind.Supplier")}static getLookupAsync(){return I(this,null,function*(){return Cs("Northwind.Supplier")})}};t(A,"SupplierRow"),A.idProperty="SupplierID",A.nameProperty="CompanyName",A.localTextPrefix="Northwind.Supplier",A.lookupKey="Northwind.Supplier",A.deletePermission="Northwind:General",A.insertPermission="Northwind:General",A.readPermission="Northwind:General",A.updatePermission="Northwind:General",A.Fields=Ns();import{serviceRequest as ws}from"@serenity-is/corelib";var vt;(e=>(e.baseUrl="Serenity.Demo.Northwind/Supplier",e.Methods={Create:"Serenity.Demo.Northwind/Supplier/Create",Update:"Serenity.Demo.Northwind/Supplier/Update",Delete:"Serenity.Demo.Northwind/Supplier/Delete",Retrieve:"Serenity.Demo.Northwind/Supplier/Retrieve",List:"Serenity.Demo.Northwind/Supplier/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(s,a,u){return ws(e.baseUrl+"/"+o,s,a,u)}})))(vt||(vt={}));import{ColumnsBase as bs,fieldsProxy as Es}from"@serenity-is/corelib";var We=class extends bs{};t(We,"TerritoryColumns"),We.columnsKey="Northwind.Territory",We.Fields=Es();import{StringEditor as Ps,LookupEditor as Ts,PrefixedContext as Is,initFormType as Ls}from"@serenity-is/corelib";var qt=class extends Is{constructor(i){if(super(i),!qt.init){qt.init=!0;var e=Ps,o=Ts;Ls(qt,["TerritoryID",e,"TerritoryDescription",e,"RegionID",o])}}},$e=qt;t($e,"TerritoryForm"),$e.formKey="Northwind.Territory";import{getLookup as Os,getLookupAsync as As,fieldsProxy as _s}from"@serenity-is/corelib";var G=class{static getLookup(){return Os("Northwind.Territory")}static getLookupAsync(){return I(this,null,function*(){return As("Northwind.Territory")})}};t(G,"TerritoryRow"),G.idProperty="ID",G.nameProperty="TerritoryID",G.localTextPrefix="Northwind.Territory",G.lookupKey="Northwind.Territory",G.deletePermission="Northwind:General",G.insertPermission="Northwind:General",G.readPermission="Northwind:General",G.updatePermission="Northwind:General",G.Fields=_s();import{serviceRequest as ks}from"@serenity-is/corelib";var xt;(e=>(e.baseUrl="Serenity.Demo.Northwind/Territory",e.Methods={Create:"Serenity.Demo.Northwind/Territory/Create",Update:"Serenity.Demo.Northwind/Territory/Update",Delete:"Serenity.Demo.Northwind/Territory/Delete",Retrieve:"Serenity.Demo.Northwind/Territory/Retrieve",List:"Serenity.Demo.Northwind/Territory/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(s,a,u){return ks(e.baseUrl+"/"+o,s,a,u)}})))(xt||(xt={}));var Se=class extends Us{constructor(){super(...arguments);this.form=new Te(this.idPrefix)}getFormKey(){return Te.formKey}getRowDefinition(){return L}getService(){return ct.baseUrl}};t(Se,"CategoryDialog"),Se=f([Fs.registerClass("Serenity.Demo.Northwind.CategoryDialog")],Se);import{Decorators as qs,EntityGrid as Ms}from"@serenity-is/corelib";var Mt=class extends Ms{getColumnsKey(){return Pe.columnsKey}getDialogType(){return Se}getRowDefinition(){return L}getService(){return ct.baseUrl}};t(Mt,"CategoryGrid"),Mt=f([qs.registerClass("Serenity.Demo.Northwind.CategoryGrid")],Mt);import{Decorators as Go,EntityDialog as rl,TabsExtensions as ol}from"@serenity-is/corelib";import{htmlEncode as Mr,reloadLookup as il,localText as Hr}from"@serenity-is/corelib";import{DialogUtils as nl}from"@serenity-is/extensions";import{Decorators as Ys,SubDialogHelper as Zs}from"@serenity-is/corelib";import{Decorators as Ho,EntityGrid as Bs,EnumEditor as Qs,LookupEditor as Ks}from"@serenity-is/corelib";import{toId as Vs}from"@serenity-is/corelib";import{ExcelExportHelper as Xs,PdfExportHelper as Js,ReportHelper as zs}from"@serenity-is/extensions";import{Decorators as Mo,EntityDialog as Hs}from"@serenity-is/corelib";import{ReportHelper as Gs}from"@serenity-is/extensions";var ve=class extends Hs{constructor(){super();this.form=new He(this.idPrefix)}getFormKey(){return He.formKey}getRowDefinition(){return O}getService(){return Ge.baseUrl}getToolbarButtons(){var e=super.getToolbarButtons();return e.push(Gs.createToolButton({title:"Invoice",cssClass:"export-pdf-button",reportKey:"Northwind.OrderDetail",getParams:()=>({OrderID:this.get_entityId()})})),e}updateInterface(){super.updateInterface(),this.toolbar.findButton("export-pdf-button").toggle(this.isEditMode())}};t(ve,"OrderDialog"),ve=f([Mo.registerClass("Serenity.Demo.Northwind.OrderDialog"),Mo.panel()],ve);var Ws=O.Fields,je=class extends Bs{constructor(e){super(e)}getColumnsKey(){return _e.columnsKey}getDialogType(){return ve}getRowDefinition(){return O}getService(){return Ge.baseUrl}getQuickFilters(){var e=super.getQuickFilters();return e.push({type:Ks,options:{lookupKey:S.lookupKey,async:!0},field:"ProductID",title:"Contains Product in Details",handler:o=>{this.view.params.ProductID=Vs(o.value)},cssClass:"hidden-xs"}),e}createQuickFilters(){super.createQuickFilters(),this.shippingStateFilter=this.findQuickFilter(Qs,Ws.ShippingState)}getButtons(){var e=super.getButtons();return e.push(Xs.createToolButton({grid:this,service:Ge.baseUrl+"/ListExcel",onViewSubmit:()=>this.onViewSubmit(),separator:!0})),e.push(Js.createToolButton({grid:this,onViewSubmit:()=>this.onViewSubmit()})),e}getColumns(){var e=super.getColumns();return e.splice(1,0,{id:"Print Invoice",field:null,name:"",cssClass:"align-center",format:o=>'<a class="inline-action print-invoice" title="invoice"><i class="fa fa-file-pdf-o text-red"></i></a>',width:36,minWidth:36,maxWidth:36}),e}onClick(e,o,s){if(super.onClick(e,o,s),!e.isDefaultPrevented()){var a=this.itemAt(o),u=$(e.target);u.parent().hasClass("inline-action")&&(u=u.parent()),u.hasClass("inline-action")&&(e.preventDefault(),u.hasClass("print-invoice")&&zs.execute({reportKey:"Northwind.OrderDetail",params:{OrderID:a.OrderID}}))}}set_shippingState(e){this.shippingStateFilter.value=e==null?"":e.toString()}addButtonClick(){var e=this.view.params.EqualityFilter;this.editItem({CustomerID:e?e.CustomerID:null})}};t(je,"OrderGrid"),je=f([Ho.registerClass("Serenity.Demo.Northwind.OrderGrid"),Ho.filterable()],je);import{Decorators as $s,EditorUtils as js}from"@serenity-is/corelib";var Ye=class extends ve{updateInterface(){super.updateInterface(),js.setReadOnly(this.form.CustomerID,!0)}};t(Ye,"CustomerOrderDialog"),Ye=f([$s.registerClass("Serenity.Demo.Northwind.CustomerOrderDialog")],Ye);import{tryFirst as el}from"@serenity-is/corelib";var tl=O.Fields,Ze=class extends je{constructor(e){super(e)}getDialogType(){return Ye}getColumns(){return super.getColumns().filter(e=>e.field!==tl.CustomerCompanyName)}initEntityDialog(e,o){super.initEntityDialog(e,o),Zs.cascade(o,this.element.closest(".ui-dialog"))}getButtons(){var e=super.getButtons(),o=el(e,s=>s.action==="add");return o&&(o.disabled=()=>!this.customerID),e}addButtonClick(){this.customerID&&this.editItem({CustomerID:this.customerID})}getInitialTitle(){return null}getGridCanLoad(){return super.getGridCanLoad()&&!!this.customerID}get customerID(){return this._customerID}set customerID(e){this._customerID!==e&&(this._customerID=e,this.setEquality("CustomerID",e),this.refresh(),this.updateInterface())}};t(Ze,"CustomerOrdersGrid"),Ze=f([Ys.registerClass()],Ze);var et=class extends rl{constructor(){super();this.form=new Oe(this.idPrefix);this.ordersGrid=new Ze(this.byId("OrdersGrid")),this.ordersGrid.openDialogsAsPanel=!1,this.byId("NoteList").closest(".field").hide().end().appendTo(this.byId("TabNotes")),nl.pendingChangesConfirmation(this.element,()=>this.getSaveState()!=this.loadedState)}getFormKey(){return Oe.formKey}getRowDefinition(){return q}getService(){return ft.baseUrl}getSaveState(){try{return $.toJSON(this.getSaveEntity())}catch(e){return null}}loadResponse(e){super.loadResponse(e),this.loadedState=this.getSaveState()}loadEntity(e){super.loadEntity(e),ol.setDisabled(this.tabs,"Orders",this.isNewOrDeleted()),this.ordersGrid.customerID=e.CustomerID}onSaveSuccess(e){super.onSaveSuccess(e),il("Northwind.Customer")}getTemplate(){return`<div id="~_Tabs" class="s-DialogContent">
    <ul>
        <li><a href="#~_TabInfo"><span>${Mr(Hr("Db.Northwind.Customer.EntitySingular"))}</span></a></li>
        <li><a href="#~_TabNotes"><span>${Mr(Hr("Db.Northwind.Note.EntityPlural"))}</span></a></li>
        <li><a href="#~_TabOrders"><span>${Mr(Hr("Db.Northwind.Order.EntityPlural"))}</span></a></li>
    </ul>
    <div id="~_TabInfo" class="tab-pane s-TabInfo">
        <div id="~_Toolbar" class="s-DialogToolbar">
        </div>
        <div class="s-Form">
            <form id="~_Form" action="">
                <div class="fieldset ui-widget ui-widget-content ui-corner-all">
                    <div id="~_PropertyGrid"></div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </div>
    <div id="~_TabNotes" class="tab-pane s-TabNotes">
    </div>
    <div id="~_TabOrders" class="tab-pane s-TabOrders">
        <div id="~_OrdersGrid">
        </div>
    </div>
</div>`}};t(et,"CustomerDialog"),et=f([Go.registerClass("Serenity.Demo.Northwind.CustomerDialog"),Go.panel()],et);import{Decorators as Bo,EntityGrid as al}from"@serenity-is/corelib";var Ht=class extends al{getColumnsKey(){return Ie.columnsKey}getDialogType(){return et}getRowDefinition(){return q}getService(){return ft.baseUrl}};t(Ht,"CustomerGrid"),Ht=f([Bo.registerClass("Serenity.Demo.Norhtwind.CustomerGrid"),Bo.filterable()],Ht);import{Decorators as Qo,EntityDialog as sl}from"@serenity-is/corelib";var tt=class extends sl{constructor(){super(...arguments);this.form=new Qe(this.idPrefix)}getFormKey(){return Qe.formKey}getRowDefinition(){return S}getService(){return De.baseUrl}};t(tt,"ProductDialog"),tt=f([Qo.registerClass(),Qo.maximizable()],tt);import{Decorators as Ko,EntityGrid as ll,LookupEditor as pl}from"@serenity-is/corelib";import{deepClone as ul,formatNumber as nr,htmlEncode as St,notifyError as Vo,parseDecimal as dl,parseInteger as cl,parseQueryString as ml,serviceRequest as fl,localText as Xo,toId as yl,trimToNull as hl,tryFirst as vl}from"@serenity-is/corelib";import{ExcelExportHelper as gl,PdfExportHelper as Rl}from"@serenity-is/extensions";var ar=S.Fields,Gt=class extends ll{constructor(e){super(e);this.pendingChanges={};this.slickContainer.on("change",".edit:input",o=>this.inputsChange(o))}getColumnsKey(){return Re.columnsKey}getDialogType(){return tt}getRowDefinition(){return S}getService(){return De.baseUrl}getButtons(){var e=super.getButtons();return e.push(gl.createToolButton({grid:this,service:De.baseUrl+"/ListExcel",onViewSubmit:()=>this.onViewSubmit(),separator:!0})),e.push(Rl.createToolButton({grid:this,onViewSubmit:()=>this.onViewSubmit(),reportTitle:"Product List",columnTitles:{Discontinued:"Dis."},tableOptions:{columnStyles:{ProductID:{cellWidth:25,halign:"right"},Discountinued:{cellWidth:25}}}})),e.push({title:"Save Changes",cssClass:"apply-changes-button disabled",onClick:o=>this.saveClick(),separator:!0}),e}onViewProcessData(e){return this.pendingChanges={},this.setSaveButtonState(),super.onViewProcessData(e)}numericInputFormatter(e){if(e.item.__nonDataRow)return St(nr(e.value,"#0.##"));var o="edit numeric",s=e.item,a=this.pendingChanges[s.ProductID];a&&a[e.column.field]!==void 0&&(o+=" dirty");var u=this.getEffectiveValue(s,e.column.field);return"<input type='text' class='"+o+"' data-field='"+e.column.field+"' value='"+nr(u,"0.##")+"'/>"}stringInputFormatter(e){if(e.item.__nonDataRow)return St(e.value);var o="edit string",s=e.item,a=this.pendingChanges[s.ProductID],u=e.column;a&&a[u.field]!==void 0&&(o+=" dirty");var h=this.getEffectiveValue(s,u.field);return"<input type='text' class='"+o+"' data-field='"+u.field+"' value='"+St(h)+"' maxlength='"+u.sourceItem.maxLength+"'/>"}selectFormatter(e,o,s){if(e.item.__nonDataRow)return St(e.value);var a="edit",u=e.item,h=this.pendingChanges[u.ProductID],C=e.column;h&&h[o]!==void 0&&(a+=" dirty");var le=this.getEffectiveValue(u,o),X="<select class='"+a+"' data-field='"+o+"' style='width: 100%; max-width: 100%'><option value=''>--</option>";for(var N of s.items){let fe=N[s.idField];X+="<option value='"+St(fe)+"'",fe==le&&(X+=" selected"),X+=">"+St(N[s.textField])+"</option>"}return X+"</select>"}getEffectiveValue(e,o){var s=this.pendingChanges[e.ProductID];return s&&s[o]!==void 0?s[o]:e[o]}getColumns(){var e=new Re(super.getColumns()),o=t(a=>this.numericInputFormatter(a),"num"),s=t(a=>this.stringInputFormatter(a),"str");return e.QuantityPerUnit&&(e.QuantityPerUnit.format=s),e.CategoryName&&(e.CategoryName.referencedFields=[ar.CategoryID])&&(e.CategoryName.format=a=>this.selectFormatter(a,ar.CategoryID,L.getLookup())),e.SupplierCompanyName&&(e.SupplierCompanyName.referencedFields=[ar.SupplierID])&&(e.SupplierCompanyName.format=a=>this.selectFormatter(a,ar.SupplierID,A.getLookup())),e.UnitPrice&&(e.UnitPrice.format=o),e.UnitsInStock&&(e.UnitsInStock.format=o),e.UnitsOnOrder&&(e.UnitsOnOrder.format=o),e.ReorderLevel&&(e.ReorderLevel.format=o),e.valueOf()}inputsChange(e){var o=this.slickGrid.getCellFromEvent(e),s=this.itemAt(o.row),a=$(e.target),u=a.data("field"),h=hl(a.val()),C=this.pendingChanges[s.ProductID],le=this.getEffectiveValue(s,u),X;a.hasClass("numeric")?X=nr(le,"0.##"):X=le;var N;if(u==="UnitPrice"){if(N=dl(h!=null?h:""),N==null||isNaN(N)){Vo(Xo("Validation.Decimal"),"",null),a.val(X),a.focus();return}}else if(a.hasClass("numeric")){var fe=cl(h!=null?h:"");if(isNaN(fe)||fe>32767||fe<0){Vo(Xo("Validation.Integer"),"",null),a.val(X),a.focus();return}N=fe}else a.is("select")?N=yl(a.val()):N=h;C||(this.pendingChanges[s.ProductID]=C={}),C[u]=N,s[u]=N,this.view.refresh(),a.hasClass("numeric")&&(N=nr(N,"0.##")),a.val(N).addClass("dirty"),this.setSaveButtonState()}setSaveButtonState(){this.toolbar.findButton("apply-changes-button").toggleClass("disabled",Object.keys(this.pendingChanges).length===0)}saveClick(){if(Object.keys(this.pendingChanges).length!==0){var e=Object.keys(this.pendingChanges),o=-1,s=this;t(function a(){if(++o>=e.length){s.refresh();return}var u=e[o],h=ul(s.pendingChanges[u]);h.ProductID=u,fl(De.Methods.Update,{EntityId:u,Entity:h},C=>{delete s.pendingChanges[u],a()})},"saveNext")()}}getQuickFilters(){var e=super.getQuickFilters(),o=ml();if(o.cat){var s=vl(e,a=>a.field==S.Fields.CategoryID);s.init=a=>{a.element.getWidget(pl).value=o.cat}}return e}};t(Gt,"ProductGrid"),Gt=f([Ko.registerClass(),Ko.filterable()],Gt);import{Decorators as xl,EntityDialog as Sl}from"@serenity-is/corelib";var rt=class extends Sl{constructor(){super(...arguments);this.form=new Ve(this.idPrefix)}getFormKey(){return Ve.formKey}getRowDefinition(){return M}getService(){return gt.baseUrl}};t(rt,"RegionDialog"),rt=f([xl.registerClass("Serenity.Demo.Northwind.RegionDialog")],rt);import{Decorators as Dl,EntityGrid as Cl}from"@serenity-is/corelib";var Bt=class extends Cl{getColumnsKey(){return Ke.columnsKey}getDialogType(){return rt}getRowDefinition(){return M}getService(){return gt.baseUrl}};t(Bt,"RegionGrid"),Bt=f([Dl.registerClass("Serenity.Demo.Northwind.RegionGrid")],Bt);import{Decorators as Nl,EntityDialog as wl}from"@serenity-is/corelib";var ot=class extends wl{constructor(){super(...arguments);this.form=new Je(this.idPrefix)}getFormKey(){return Je.formKey}getRowDefinition(){return H}getService(){return Rt.baseUrl}};t(ot,"ShipperDialog"),ot=f([Nl.registerClass()],ot);import{Decorators as bl,EntityGrid as El}from"@serenity-is/corelib";var Qt=class extends El{getColumnsKey(){return Xe.columnsKey}getDialogType(){return ot}getRowDefinition(){return H}getService(){return Rt.baseUrl}};t(Qt,"ShipperGrid"),Qt=f([bl.registerClass()],Qt);import{Decorators as Pl,EntityGrid as Tl}from"@serenity-is/corelib";var Kt=class extends Tl{getColumnsKey(){return ze.columnsKey}getDialogType(){return xe}getRowDefinition(){return A}getService(){return vt.baseUrl}};t(Kt,"SupplierGrid"),Kt=f([Pl.registerClass("Serenity.Demo.Northwind.SupplierGrid")],Kt);import{Decorators as Il,EntityDialog as Ll}from"@serenity-is/corelib";var it=class extends Ll{constructor(){super(...arguments);this.form=new $e(this.idPrefix)}getFormKey(){return $e.formKey}getRowDefinition(){return G}getService(){return xt.baseUrl}};t(it,"TerritoryDialog"),it=f([Il.registerClass("Serenity.Demo.Northwind.TerritoryDialog")],it);import{Decorators as Ol,EntityGrid as Al}from"@serenity-is/corelib";var Vt=class extends Al{getColumnsKey(){return We.columnsKey}getDialogType(){return it}getRowDefinition(){return G}getService(){return xt.baseUrl}};t(Vt,"TerritoryGrid"),Vt=f([Ol.registerClass("Serenity.Demo.Northwind.TerritoryGrid")],Vt);export{Pe as CategoryColumns,Se as CategoryDialog,Te as CategoryForm,Mt as CategoryGrid,te as CategoryLangRow,wo as CategoryLangService,L as CategoryRow,ct as CategoryService,Ie as CustomerColumns,re as CustomerCustomerDemoRow,oe as CustomerDemographicRow,ie as CustomerDetailsRow,et as CustomerDialog,Ue as CustomerEditor,Oe as CustomerForm,Ht as CustomerGrid,ue as CustomerGrossSalesRow,Ye as CustomerOrderDialog,Ze as CustomerOrdersGrid,de as CustomerRepresentativesRow,q as CustomerRow,ft as CustomerService,Ae as EmployeeFormatter,mt as EmployeeListFormatter,K as EmployeeRow,ne as EmployeeTerritoryRow,yt as FreightFormatter,Fr as Gender,ge as NoteDialog,ae as NoteRow,Le as NotesEditor,_e as OrderColumns,ke as OrderDetailColumns,qe as OrderDetailDialog,Fe as OrderDetailForm,V as OrderDetailRow,Ao as OrderDetailService,Me as OrderDetailsEditor,ve as OrderDialog,He as OrderForm,je as OrderGrid,O as OrderRow,Ge as OrderService,Ur as OrderShippingState,_o as PermissionKeys,F as PhoneEditor,Re as ProductColumns,tt as ProductDialog,Qe as ProductForm,Gt as ProductGrid,se as ProductLangRow,ko as ProductLangService,ce as ProductLogRow,S as ProductRow,De as ProductService,Ke as RegionColumns,rt as RegionDialog,Ve as RegionForm,Bt as RegionGrid,M as RegionRow,gt as RegionService,kt as SalesByCategoryColumns,me as SalesByCategoryRow,Fo as SalesByCategoryService,Xe as ShipperColumns,ot as ShipperDialog,Je as ShipperForm,ht as ShipperFormatter,Qt as ShipperGrid,H as ShipperRow,Rt as ShipperService,ze as SupplierColumns,xe as SupplierDialog,Be as SupplierForm,Kt as SupplierGrid,A as SupplierRow,vt as SupplierService,We as TerritoryColumns,it as TerritoryDialog,$e as TerritoryForm,Vt as TerritoryGrid,G as TerritoryRow,xt as TerritoryService};
/*! Bundled license information:

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.0.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.1/LICENSE *)
*/
//# sourceMappingURL=index.js.map
