var ue=Object.defineProperty;var Se=Object.getOwnPropertyDescriptor;var o=(u,r)=>ue(u,"name",{value:r,configurable:!0});var c=(u,r,e,t)=>{for(var i=t>1?void 0:t?Se(r,e):r,a=u.length-1,l;a>=0;a--)(l=u[a])&&(i=(t?l(r,e,i):l(i))||i);return t&&i&&ue(r,e,i),i};var te=(u,r,e)=>new Promise((t,i)=>{var a=n=>{try{s(e.next(n))}catch(m){i(m)}},l=n=>{try{s(e.throw(n))}catch(m){i(m)}},s=n=>n.done?t(n.value):Promise.resolve(n.value).then(a,l);s((e=e.apply(u,r)).next())});import{PasswordEditor as Pe,PrefixedContext as De,initFormType as Re}from"@serenity-is/corelib";var F=class extends De{constructor(r){if(super(r),!F.init){F.init=!0;var e=Pe;Re(F,["OldPassword",e,"NewPassword",e,"ConfirmPassword",e])}}},K=F;o(K,"ChangePasswordForm"),K.formKey="Serenity.Extensions.ChangePasswordRequest";import{EmailAddressEditor as Ee,PrefixedContext as we,initFormType as Ie}from"@serenity-is/corelib";var q=class extends we{constructor(r){if(super(r),!q.init){q.init=!0;var e=Ee;Ie(q,["Email",e])}}},M=q;o(M,"ForgotPasswordForm"),M.formKey="Serenity.Extensions.ForgotPasswordRequest";import{PasswordEditor as Oe,PrefixedContext as ke,initFormType as Fe}from"@serenity-is/corelib";var B=class extends ke{constructor(r){if(super(r),!B.init){B.init=!0;var e=Oe;Fe(B,["NewPassword",e,"ConfirmPassword",e])}}},U=B;o(U,"ResetPasswordForm"),U.formKey="Serenity.Extensions.ResetPasswordRequest";import{fieldsProxy as qe}from"@serenity-is/corelib";var g=class{};o(g,"UserPreferenceRow"),g.idProperty="UserPreferenceId",g.nameProperty="Name",g.localTextPrefix="Common.UserPreference",g.deletePermission="",g.insertPermission="",g.readPermission="",g.updatePermission="",g.Fields=qe();import{serviceRequest as Be}from"@serenity-is/corelib";var A;(e=>(e.baseUrl="Extensions/UserPreference",e.Methods={Update:"Extensions/UserPreference/Update",Retrieve:"Extensions/UserPreference/Retrieve"},["Update","Retrieve"].forEach(t=>{e[t]=function(i,a,l){return Be(e.baseUrl+"/"+t,i,a,l)}})))(A||(A={}));import{Decorators as Ae,TemplatedDialog as Ve}from"@serenity-is/corelib";import{localText as re,trimToNull as Ne}from"@serenity-is/corelib";var C=class extends Ve{constructor(){super();this.dialogTitle=re("Site.BasicProgressDialog.PleaseWait")}get max(){return parseInt(this.byId("ProgressBar").attr("aria-valuemax"),10)}set max(e){this.byId("ProgressBar").attr("aria-valuemax",(e||100).toString())}get value(){return parseInt(this.byId("ProgressBar").attr("aria-valuenow"),10)}set value(e){this.byId("ProgressBar").attr("aria-valuenow",(e||0).toString()).css("width",(e||0)/(this.max||100)*100+"%").text(e+" / "+this.max)}get title(){return this.dialogTitle}set title(e){this.dialogTitle=e}getDialogButtons(){return[{text:re("Dialogs.CancelButton"),class:"btn btn-danger",click:()=>{this.cancelled=!0,this.element.closest(".ui-dialog").find(".ui-dialog-buttonpane .ui-button").attr("disabled","disabled").css("opacity","0.5"),this.element.dialog("option","title",Ne(this.cancelTitle)||re("Site.BasicProgressDialog.CancelTitle"))}}]}getDialogOptions(){var e=super.getDialogOptions();return e.width=600,e}initDialog(){super.initDialog(),this.element.closest(".ui-dialog").find(".ui-dialog-titlebar-close").hide()}getTemplate(){return`<div class="s-DialogContent s-BasicProgressDialogContent">
    <div id="~_StatusText" class="status-text" ></div>
        <div id="~_Progress" class="progress" style="height: 1.5rem">
        <div id="~_ProgressBar" class="progress-bar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
</div>`}};o(C,"BasicProgressDialog"),C=c([Ae.registerClass("Serenity.Extensions.BasicProgressDialog")],C);import{confirmDialog as He,format as I,notifyError as pe,notifySuccess as je,notifyWarning as Le,localText as y}from"@serenity-is/corelib";var ie=class{createProgressDialog(){this.progressDialog=new C,this.progressDialog.dialogOpen(),this.progressDialog.max=this.keys.length,this.progressDialog.value=0}getConfirmationFormat(){return y("Site.BulkServiceAction.ConfirmationFormat")}getConfirmationMessage(r){return I(this.getConfirmationFormat(),r)}confirm(r,e){He(this.getConfirmationMessage(r),e)}getNothingToProcessMessage(){return y("Site.BulkServiceAction.NothingToProcess")}nothingToProcess(){pe(this.getNothingToProcessMessage())}getParallelRequests(){return 1}getBatchSize(){return 1}startParallelExecution(){this.createProgressDialog(),this.successCount=0,this.errorCount=0,this.pendingRequests=0,this.completedRequests=0,this.errorCount=0,this.errorByKey={},this.queue=this.keys.slice(),this.queueIndex=0;for(var r=this.getParallelRequests();r-- >0;)this.executeNextBatch()}serviceCallCleanup(){this.pendingRequests--,this.completedRequests++;var r=y(this.progressDialog.cancelled?"Site.BasicProgressDialog.CancelTitle":"Site.BasicProgressDialog.PleaseWait");r+=" (",this.successCount>0&&(r+=I(y("Site.BulkServiceAction.SuccessCount"),this.successCount)),this.errorCount>0&&(this.successCount>0&&(r+=", "),r+=I(y("Site.BulkServiceAction.ErrorCount"),this.errorCount)),this.progressDialog.title=r+")",this.progressDialog.value=this.successCount+this.errorCount,!this.progressDialog.cancelled&&this.progressDialog.value<this.keys.length?this.executeNextBatch():this.pendingRequests===0&&(this.progressDialog.dialogClose(),this.showResults(),this.done&&(this.done(),this.done=null))}executeForBatch(r){}executeNextBatch(){for(var r=this.getBatchSize(),e=[];!(e.length>=r||this.queueIndex>=this.queue.length);)e.push(this.queue[this.queueIndex++]);e.length>0&&(this.pendingRequests++,this.executeForBatch(e))}getAllHadErrorsFormat(){return y("Site.BulkServiceAction.AllHadErrorsFormat")}showAllHadErrors(){pe(I(this.getAllHadErrorsFormat(),this.errorCount))}getSomeHadErrorsFormat(){return y("Site.BulkServiceAction.SomeHadErrorsFormat")}showSomeHadErrors(){Le(I(this.getSomeHadErrorsFormat(),this.successCount,this.errorCount))}getAllSuccessFormat(){return y("Site.BulkServiceAction.AllSuccessFormat")}showAllSuccess(){je(I(this.getAllSuccessFormat(),this.successCount))}showResults(){if(this.errorCount===0&&this.successCount===0){this.nothingToProcess();return}if(this.errorCount>0&&this.successCount===0){this.showAllHadErrors();return}if(this.errorCount>0){this.showSomeHadErrors();return}this.showAllSuccess()}execute(r){if(this.keys=r,this.keys.length===0){this.nothingToProcess();return}this.confirm(this.keys.length,()=>this.startParallelExecution())}get_successCount(){return this.successCount}set_successCount(r){this.successCount=r}get_errorCount(){return this.errorCount}set_errorCount(r){this.errorCount=r}};o(ie,"BulkServiceAction");import{coalesce as ce,deepClone as Ge,postToService as Ke}from"@serenity-is/corelib";var de;(r=>{function u(e){return{hint:ce(e.hint,"Excel"),title:ce(e.title,""),cssClass:"export-xlsx-button",icon:"fa-file-excel-o",onClick:function(){if(!e.onViewSubmit())return;let t=e.grid;var i=Ge(t.getView().params);i.Take=0,i.Skip=0;var a=t.getView().sortBy;a&&(i.Sort=a),i.ExportColumns=[];let l=t.getGrid().getColumns();for(let s of l)i.ExportColumns.push(s.id||s.field);e.editRequest&&(i=e.editRequest(i)),Ke({service:e.service,request:i,target:"_blank"})},separator:e.separator}}r.createToolButton=u,o(u,"createToolButton")})(de||(de={}));import{deepClone as $e,format as Me,formatDate as me,resolveUrl as he,serviceCall as Ue}from"@serenity-is/corelib";var ge;(l=>{function u(s,n,m){return s.map(h=>{let d={dataKey:h.id||h.field,title:h.name||""};m&&m[d.dataKey]!=null&&(d.title=m[d.dataKey]);let f={};return(h.cssClass||"").indexOf("align-right")>=0?f.halign="right":(h.cssClass||"").indexOf("align-center")>=0&&(f.halign="center"),n[d.dataKey]=f,d})}o(u,"toAutoTableColumns");function r(s,n,m,h){let d=document.createElement("span"),f=0;return n.map(D=>{let p=[];for(let E=0;E<h.length;E++){var O=h[E],k=s.getFormatter(f,O),R=s.getFormatterContext(f,E);R.item=D,R.value=D[O.field];let x=k?k(R):"";!x||x.indexOf("<")<0&&x.indexOf("&")<0?p.push(x):(d.innerHTML=x,d.children.length==1&&$(d.children[0]).is("select")?p.push($(d.children[0]).children("[selected]").text()):d.children.length==1&&$(d.children[0]).is(":input")?p.push($(d.children[0]).val()):d.children.length==1&&$(d.children).is(".check-box")?p.push($(d.children).hasClass("checked")?"X":""):p.push(d.textContent||""))}return f++,p})}o(r,"toAutoTableData");function e(s){var n=s.grid;if(s.onViewSubmit()){a();var m=$e(n.view.params);m.Take=0,m.Skip=0;var h=n.view.sortBy;h!=null&&(m.Sort=h);var d=n.slickGrid.getColumns();d=d.filter(D=>D.id!=="__select__"),m.IncludeColumns=[];for(var f of d)m.IncludeColumns.push(f.id||f.field);Ue({url:n.view.url,request:m,onSuccess:D=>{let p=new jsPDF("l","pt"),O=d,k={},R=u(O,k,s.columnTitles);var E=R.map(b=>b.dataKey);let x=D.Entities||[],Ce=r(n.slickGrid,x,E,O);p.setFontSize(s.titleFontSize||10),p.setFont("helvetica","bold");let Te=s.reportTitle||n.getTitle()||"Report";p.autoTableText(Te,p.internal.pageSize.width/2,s.titleTop||25,{halign:"center"});var ne="{{T}}";let le=s.pageNumbers==null||s.pageNumbers;var w=$.extend({margin:{top:25,left:25,right:25,bottom:le?25:30},startY:60,styles:{fontSize:8,overflow:"linebreak",cellPadding:2,valign:"middle"},columnStyles:k},s.tableOptions),J,X;if(le&&(J=o(function(b){var ee=b.pageCount;typeof p.putTotalPages=="function"&&(ee=ee+" / "+ne),p.autoTableText(ee,p.internal.pageSize.width/2,p.internal.pageSize.height-w.margin.bottom,{halign:"center"})},"footer")),(s.printDateTimeHeader==null||s.printDateTimeHeader)&&(X=o(function(b){p.setFont("helvetica","normal"),p.setFontSize(8),p.autoTableText(me(new Date,"dd-MM-yyyy HH:mm"),p.internal.pageSize.width-w.margin.right,13,{halign:"right"})},"header")),w.didDrawPage=b=>{X&&X(b),J&&J(b)},w.head=[R],w.body=Ce,p.autoTable(w),typeof p.putTotalPages=="function"&&p.putTotalPages(ne),!s.output||s.output=="file"){var Y=s.fileName||s.reportTitle||"{0}_{1}.pdf";Y=Me(Y,n.getTitle()||"report",me(new Date,"yyyyMMdd_HHmm")),p.save(Y);return}s.autoPrint&&p.autoPrint();var Z=s.output;Z=="newwindow",Z="dataurlnewwindow",p.output(Z)}})}}l.exportToPdf=e,o(e,"exportToPdf");function t(s){return{title:s.title||"",hint:s.hint||"PDF",cssClass:"export-pdf-button",onClick:()=>e(s),separator:s.separator}}l.createToolButton=t,o(t,"createToolButton");function i(){if(typeof jsPDF=="undefined"){var s=$("jsPDFScript");s.length>0||($("<script/>").attr("type","text/javascript").attr("id","jsPDFScript").attr("src",he("~/Serenity.Assets/Scripts/jspdf.min.js")).appendTo(document.head),typeof jsPDF=="undefined"&&typeof jspdf!="undefined"&&(window.jsPDF=jspdf.jsPDF))}}o(i,"includeJsPDF");function a(){if(i(),!(typeof jsPDF=="undefined"||typeof jsPDF.API=="undefined"||typeof jsPDF.API.autoTable!="undefined")){var s=$("jsPDFAutoTableScript");s.length>0||$("<script/>").attr("type","text/javascript").attr("id","jsPDFAutoTableScript").attr("src",he("~/Serenity.Assets/Scripts/jspdf.plugin.autotable.min.js")).appendTo(document.head)}}o(a,"includeAutoTable")})(ge||(ge={}));import{Decorators as _,EnumTypeRegistry as _e}from"@serenity-is/corelib";import{htmlEncode as se,localText as We,tryGetText as ze}from"@serenity-is/corelib";var v=class{constructor(){this.allowClear=!0}format(r){var e=_e.get(this.enumKey),t="<select>";this.allowClear&&(t+='<option value="">',t+=se(this.emptyItemText||We("Controls.SelectEditor.EmptyItemText")),t+="</option>");for(var i of Object.keys(e).filter(l=>!isNaN(parseInt(l,10)))){t+='<option value="'+se(i)+'"',i==r.value&&(t+=" selected");var a=e[i];t+=">",t+=se(ze("Enums."+this.enumKey+"."+a)||a),t+="</option>"}return t+="</select>",t}};o(v,"EnumSelectFormatter"),c([_.option()],v.prototype,"enumKey",2),c([_.option()],v.prototype,"allowClear",2),c([_.option()],v.prototype,"emptyItemText",2),v=c([_.registerFormatter("Serenity.Extensions.EnumSelectFormatter")],v);import{Decorators as Qe}from"@serenity-is/corelib";import{htmlEncode as Je,toSingleLine as Xe}from"@serenity-is/corelib";var T=class{format(r){return T.formatValue(r.value)}static formatValue(r){var e=$("<div/>").html(r||"").text();return Je(Xe(e))}};o(T,"SingleLineTextFormatter"),T=c([Qe.registerFormatter("Serenity.Extensions.SingleLineTextFormatter")],T);import{Decorators as oe,EntityGrid as Ye,IGetEditValue as Ze,ISetEditValue as et}from"@serenity-is/corelib";import{deepClone as W,indexOf as tt,tryFirst as rt}from"@serenity-is/corelib";var V=class extends Ye{constructor(e,t){super(e,t);this.nextId=1}getIdProperty(){return"__id"}id(e){return e[this.getIdProperty()]}getNextId(){return"`"+this.nextId++}setNewId(e){e[this.getIdProperty()]=this.getNextId()}save(e,t){var i=e.request,a=W(i.Entity),l=this.id(a);if(l==null&&(a[this.getIdProperty()]=this.getNextId()),!!this.validateEntity(a,l)){var s=this.view.getItems().slice();if(l==null)s.push(a);else{var n=tt(s,m=>this.id(m)===l);s[n]=W({},s[n],a)}this.setEntities(s),t({})}}deleteEntity(e){return this.view.deleteItem(e),!0}validateEntity(e,t){return!0}setEntities(e){this.view.setItems(e,!0)}getNewEntity(){return{}}getButtons(){var e=super.getButtons(),t=rt(e,i=>i.action==="add");return t!=null&&(t.onClick=()=>{this.createEntityDialog(this.getItemType(),i=>{var a=i;a.onSave=(l,s)=>this.save(l,s),this.transferDialogReadOnly(a),a.loadEntityAndOpenDialog(this.getNewEntity())})}),e.filter(i=>i.action!=="refresh")}editItem(e){var t=e,i=this.view.getItemById(t);this.createEntityDialog(this.getItemType(),a=>{var l=a;l.onDelete=(s,n)=>{this.deleteEntity(t)&&n({})},this.transferDialogReadOnly(l),l.onSave=(s,n)=>this.save(s,n),l.loadEntityAndOpenDialog(i)})}getEditValue(e,t){t[e.name]=this.value}setEditValue(e,t){this.value=e[t.name]}get value(){var e=this.getIdProperty();return this.view.getItems().map(t=>{var i=W(t),a=i[e];return a&&a.toString().charAt(0)=="`"&&delete i[e],i})}set value(e){var t=this.getIdProperty();this.view.setItems((e||[]).map(i=>{var a=W(i);return a[t]==null&&(a[t]=this.getNextId()),a}),!0)}getGridCanLoad(){return!1}usePager(){return!1}getInitialTitle(){return null}createQuickSearchInput(){}};o(V,"GridEditorBase"),V=c([oe.registerClass("Serenity.Extensions.GridEditorBase",[Ze,et]),oe.editor(),oe.element("<div/>")],V);import{Decorators as it,EntityDialog as st}from"@serenity-is/corelib";var N=class extends st{getIdProperty(){return"__id"}destroy(){this.onSave=null,this.onDelete=null,super.destroy()}updateInterface(){super.updateInterface(),this.applyChangesButton&&this.applyChangesButton.hide()}saveHandler(e,t){this.onSave&&this.onSave(e,t)}deleteHandler(e,t){this.onDelete&&this.onDelete(e,t)}};o(N,"GridEditorDialog"),N=c([it.registerClass("Serenity.Extensions.GridEditorDialog")],N);import{Decorators as at,PropertyGrid as nt,TemplatedDialog as lt}from"@serenity-is/corelib";import{resolveUrl as ut,serviceCall as pt}from"@serenity-is/corelib";import{coalesce as z,postToUrl as ot}from"@serenity-is/corelib";var Q;(e=>{function u(t){return{title:z(t.title,"Report"),cssClass:z(t.cssClass,"print-button"),icon:t.icon,onClick:()=>{e.execute(t)}}}e.createToolButton=u,o(u,"createToolButton");function r(t){var i=t.getParams?t.getParams():t.params;ot({url:"~/Serenity.Extensions/Report/"+(t.download?"Download":"Render"),params:{key:t.reportKey,ext:z(t.extension,"pdf"),opt:i?$.toJSON(i):""},target:z(t.target,"_blank")})}e.execute=r,o(r,"execute")})(Q||(Q={}));var S=class extends lt{constructor(e){super(e);this.updateInterface(),this.loadReport(this.options.reportKey)}getDialogButtons(){return null}createPropertyGrid(){this.propertyGrid&&this.byId("PropertyGrid").html("").attr("class",""),this.propertyGrid=new nt(this.byId("PropertyGrid"),{idPrefix:this.idPrefix,useCategories:!0,items:this.report.Properties}).init(null)}loadReport(e){pt({url:ut("~/Serenity.Extensions/Report/Retrieve"),request:{ReportKey:e},onSuccess:t=>{this.report=t,this.dialogTitle=this.report.Title,this.createPropertyGrid(),this.propertyGrid.load(this.report.InitialSettings||{}),this.updateInterface(),this.dialogOpen()}})}updateInterface(){this.toolbar.findButton("print-preview-button").toggle(this.report&&!this.report.IsDataOnlyReport&&!this.report.IsExternalReport),this.toolbar.findButton("run-button").toggle(this.report&&this.report.IsExternalReport),this.toolbar.findButton("export-pdf-button").toggle(this.report&&!this.report.IsDataOnlyReport&&!this.report.IsExternalReport),this.toolbar.findButton("export-xlsx-button").toggle(this.report&&this.report.IsDataOnlyReport&&!this.report.IsExternalReport)}executeReport(e,t,i){if(this.validateForm()){var a={};this.propertyGrid.save(a),Q.execute({download:i,reportKey:this.report.ReportKey,extension:t,target:e,params:a})}}getToolbarButtons(){return[{title:"Preview",cssClass:"print-preview-button",onClick:()=>this.executeReport("_blank",null,!1)},{title:"Run",cssClass:"run-button",icon:"fa-print text-blue",onClick:()=>this.executeReport("_blank",null,!1)},{title:"PDF",cssClass:"export-pdf-button",onClick:()=>this.executeReport("_blank","pdf",!0)},{title:"Excel",cssClass:"export-xlsx-button",onClick:()=>this.executeReport("_blank","xlsx",!0)}]}getTemplate(){return`<div class="s-DialogContent">
<div id="~_Toolbar" class="s-DialogToolbar">
</div>
<div class="s-Form">
    <form id="~_Form" action="">
        <div class="fieldset ui-widget ui-widget-content ui-corner-all">
            <div id="~_PropertyGrid"></div>
            <div class="clear"></div>
        </div>
    </form>
</div>
</div>`}};o(S,"ReportDialog"),S=c([at.registerClass("Serenity.Extensions.ReportDialog")],S);import{Decorators as ct,QuickSearchInput as dt,Widget as mt}from"@serenity-is/corelib";import{coalesce as ht,trimToNull as gt}from"@serenity-is/corelib";var H=class extends mt{constructor(r){super(r),$(".report-link",r).click(e=>this.reportLinkClick(e)),new dt($(".s-QuickSearchBar input",r),{onSearch:(e,t,i)=>{this.updateMatchFlags(t),i(!0)}})}updateMatchFlags(r){var e=$(".report-list",this.element).find("li").removeClass("non-match");if(r=gt(r),!!r){r=Select2.util.stripDiacritics(r).toUpperCase();var t=e.filter(".report-item");t.each(function(s,n){var m=$(n),h=Select2.util.stripDiacritics(ht(m.text(),"").toUpperCase());h.indexOf(r)<0&&m.addClass("non-match")});var i=t.not(".non-match"),a=i.parents("li").add(i);a.children("[data-bs-toggle]:not([aria-expanded=true])").attr("aria-expanded","true").removeClass("collapsed"),a.parent(".collapse:not(.show)").addClass("show");var l=e.not(a);l.addClass("non-match")}}reportLinkClick(r){r.preventDefault(),new S({reportKey:$(r.target).data("key")}).dialogOpen()}};o(H,"ReportPage"),H=c([ct.registerClass("Serenity.Extensions.ReportPage")],H);var ae=class{getItem(r){return te(this,null,function*(){return(yield Promise.resolve(A.Retrieve({PreferenceType:"UserPreferenceStorage",Name:r}))).Value})}setItem(r,e){return te(this,null,function*(){return Promise.resolve(A.Update({PreferenceType:"UserPreferenceStorage",Name:r,Value:e}))})}};o(ae,"UserPreferenceStorage");import{TemplatedDialog as ft,WX as yt}from"@serenity-is/corelib";import{confirmDialog as vt,localText as xt}from"@serenity-is/corelib";var fe;(r=>{function u(e,t){e.on("dialogbeforeclose panelbeforeclose",function(i){!yt.hasOriginalEvent(i)||!t()||(i.preventDefault(),vt(xt("Site.Dialogs.PendingChangesConfirmation"),()=>e.find("div.save-and-close-button").click(),{onNo:function(){e.hasClass("ui-dialog-content")?e.dialog("close"):e.hasClass("s-Panel")&&ft.closePanel(e)}}))})}r.pendingChangesConfirmation=u,o(u,"pendingChangesConfirmation")})(fe||(fe={}));import{Decorators as bt,PropertyDialog as Ct}from"@serenity-is/corelib";import{coalesce as Tt,isEmptyOrNull as ye,localText as ve}from"@serenity-is/corelib";var P=class extends Ct{constructor(r){if(super(r),ye(this.options.cssClass)||this.element.addClass(this.options.cssClass),!ye(this.options.message)){var e=$("<div/>").addClass("message").insertBefore(this.byId("PropertyGrid"));this.options.isHtml?e.html(this.options.message):e.text(this.options.message)}this.dialogTitle=this.options.title||"Prompt"}getDialogButtons(){return[{text:ve("Dialogs.OkButton"),click:()=>{this.validateForm()&&(this.options.validateValue==null||this.options.validateValue(this.value))&&this.dialogClose()}},{text:ve("Dialogs.CancelButton"),click:()=>this.dialogClose()}]}loadInitialEntity(){this.value=this.options.value}getPropertyItems(){return[{name:"Value",editorType:this.options.editorType||"String",required:Tt(this.options.required,!0),editorParams:this.options.editorOptions}]}get value(){return this.getSaveEntity().Value}set value(r){this.propertyGrid.load({Value:r})}static prompt(r,e,t,i){new P({title:r,message:e,value:t,validateValue:a=>i(a)}).dialogOpen()}};o(P,"PromptDialog"),P=c([bt.registerClass("Serenity.Extensions.PromptDialog")],P);import{Decorators as St,EntityGrid as Pt}from"@serenity-is/corelib";var j=class extends Pt{getSlickOptions(){var r=super.getSlickOptions();return r.enableTextSelectionOnCells=!0,r.selectedCellCssClass="slick-row-selected",r.enableCellNavigation=!0,r}createSlickGrid(){var r=super.createSlickGrid();return r.setSelectionModel(new Slick.RowSelectionModel),r}};o(j,"SelectableEntityGrid"),j=c([St.registerClass("Serenity.Extensions.SelectableEntityGrid")],j);import{CascadedWidgetLink as Dt,Decorators as Rt,EditorUtils as Et,Select2AjaxEditor as wt,Widget as It}from"@serenity-is/corelib";import{ColumnSelection as Ot,isEmptyOrNull as kt,RetrieveColumnSelection as Ft,serviceCall as qt}from"@serenity-is/corelib";var L=class extends wt{constructor(e,t){super(e,t);this.setCascadeFrom(this.options.cascadeFrom)}setCascadeFrom(e){if(kt(e)){this.cascadeLink&&(this.cascadeLink.set_parentID(null),this.cascadeLink=null),this.options.cascadeFrom=null;return}this.cascadeLink=new Dt(It,this,t=>this.cascadeValue=this.getCascadeFromValue(t)),this.cascadeLink.set_parentID(e),this.options.cascadeFrom=e}get cascadeValue(){return this.options.cascadeValue}set cascadeValue(e){e!==this.options.cascadeValue&&(this.options.cascadeValue=e,this.value=null)}get cascadeField(){return this.options.cascadeField||this.options.cascadeFrom}set cascadeField(e){this.options.cascadeField=e}get cascadeFrom(){return this.options.cascadeFrom}set cascadeFrom(e){e!==this.options.cascadeFrom&&this.setCascadeFrom(e)}getCascadeFromValue(e){return Et.getValue(e)}getIncludeColumns(){return[]}getSort(){return[]}getTypeDelay(){return 200}executeQueryByKey(e){var t=e.request;t.ColumnSelection=Ft.keyOnly,t.IncludeColumns=this.getIncludeColumns(),super.executeQueryByKey(e)}executeQuery(e){var t=e.request;t.ColumnSelection=Ot.KeyOnly,t.IncludeColumns=this.getIncludeColumns(),t.Sort=this.getSort(),t.ExcludeTotalCount=!0,this.cascadeField&&(t.EqualityFilter=t.EqualityFilter||{},t.EqualityFilter[this.cascadeField]=this.cascadeValue),e.blockUI=!1,e.error=()=>{},this.lastRequest!=null&&this.lastRequest.readyState!=XMLHttpRequest.DONE&&this.lastRequest.abort(),this.lastRequest=qt(e),this.lastRequest.then(()=>this.lastRequest=null,()=>this.lastRequest=null)}};o(L,"ServiceEditorBase"),L=c([Rt.registerClass("Serenity.Extensions.ServiceEditorBase")],L);import{Decorators as xe,ISetEditValue as Bt,Widget as At}from"@serenity-is/corelib";import{coalesce as be,localText as Vt}from"@serenity-is/corelib";var G=class extends At{constructor(e,t){super(e,t);this.options.hideLabel&&this.element.closest(".field").find(".caption").hide(),this.updateElementContent()}updateElementContent(){var e=be(this.options.text,this.value);this.options.isLocalText&&(e=Vt(e)),this.options.isHtml?this.element.html(e):this.element.text(e)}setEditValue(e,t){this.options.text==null&&(this.value=be(this.options.text,e[t.name]),this.updateElementContent())}};o(G,"StaticTextBlock"),G=c([xe.element("<div/>"),xe.registerEditor("Serenity.Extensions.StaticTextBlock",[Bt])],G);export{C as BasicProgressDialog,ie as BulkServiceAction,K as ChangePasswordForm,fe as DialogUtils,v as EnumSelectFormatter,de as ExcelExportHelper,M as ForgotPasswordForm,V as GridEditorBase,N as GridEditorDialog,ge as PdfExportHelper,P as PromptDialog,S as ReportDialog,Q as ReportHelper,H as ReportPage,U as ResetPasswordForm,j as SelectableEntityGrid,L as ServiceEditorBase,T as SingleLineTextFormatter,G as StaticTextBlock,g as UserPreferenceRow,A as UserPreferenceService,ae as UserPreferenceStorage};
//# sourceMappingURL=index.js.map
