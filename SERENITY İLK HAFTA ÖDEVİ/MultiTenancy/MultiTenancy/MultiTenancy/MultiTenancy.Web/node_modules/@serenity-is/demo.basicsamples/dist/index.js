var be=Object.defineProperty;var ot=Object.getOwnPropertyDescriptor;var r=(a,e)=>be(a,"name",{value:e,configurable:!0});var i=(a,e,t,o)=>{for(var s=o>1?void 0:o?ot(e,t):e,m=a.length-1,n;m>=0;m--)(n=a[m])&&(s=(o?n(e,t,s):n(s))||s);return o&&s&&be(e,t,s),s};import{serviceRequest as it}from"@serenity-is/corelib/q";var de;(t=>(t.baseUrl="Serenity.Demo.BasicSamples",t.Methods={OrdersByShipper:"Serenity.Demo.BasicSamples/OrdersByShipper"},["OrdersByShipper"].forEach(o=>{t[o]=function(s,m,n){return it(t.baseUrl+"/"+o,s,m,n)}})))(de||(de={}));import{Decorators as st,LookupEditorBase as at}from"@serenity-is/corelib";import{formatNumber as mt}from"@serenity-is/corelib/q";import{ProductRow as nt}from"@serenity-is/demo.northwind";var u=class extends at{constructor(e,t){super(e,t)}getLookupKey(){return nt.lookupKey}getItemText(e,t){return super.getItemText(e,t)+" ($"+mt(e.UnitPrice,"#,##0.00")+", "+(e.UnitsInStock>0?e.UnitsInStock+" in stock":"out of stock")+", "+(e.SupplierCompanyName||"Unknown")+")"}};r(u,"ChangingLookupTextEditor"),u=i([st.registerEditor("Serenity.Demo.BasicSamples.ChangingLookupTextEditor")],u);import{DecimalEditor as pt,IntegerEditor as ct,PrefixedContext as lt}from"@serenity-is/corelib";import{initFormType as ut}from"@serenity-is/corelib/q";var N=class extends lt{constructor(e){if(super(e),!N.init){N.init=!0;var t=u,o=pt,s=ct;ut(N,["ProductID",t,"UnitPrice",o,"Quantity",s,"Discount",o])}}},d=N;r(d,"ChangingLookupTextForm"),d.formKey="BasicSamples.ChangingLookupText";import{CustomerEditor as Dt}from"@serenity-is/demo.northwind";import{DateEditor as vt,LookupEditor as xt,PrefixedContext as St}from"@serenity-is/corelib";import{Decorators as Ct}from"@serenity-is/corelib";import{OrderDetailsEditor as ht}from"@serenity-is/demo.northwind";import{Decorators as dt}from"@serenity-is/corelib";import{OrderDetailDialog as ft,OrderDetailForm as yt,ProductRow as gt}from"@serenity-is/demo.northwind";var f=class extends ft{constructor(){super();this.form=new yt(this.idPrefix),this.form.ProductID.cascadeField=gt.Fields.CategoryID}beforeLoadEntity(t){super.beforeLoadEntity(t),this.form.ProductID.cascadeValue=this.categoryID}};r(f,"FilteredLookupOrderDetailDialog"),f=i([dt.registerClass("Serenity.Demo.BasicSamples.FilteredLookupOrderDetailDialog")],f);var y=class extends ht{constructor(t){super(t)}getDialogType(){return f}initEntityDialog(t,o){super.initEntityDialog(t,o),o.categoryID=this.categoryID}};r(y,"FilteredLookupDetailEditor"),y=i([Ct.registerEditor("Serenity.Demo.BasicSamples.FilteredLookupDetailEditor")],y);import{initFormType as Pt}from"@serenity-is/corelib/q";var U=class extends St{constructor(e){if(super(e),!U.init){U.init=!0;var t=Dt,o=vt,s=xt,m=y;Pt(U,["CustomerID",t,"OrderDate",o,"CategoryID",s,"DetailList",m])}}},g=U;r(g,"FilteredLookupInDetailForm"),g.formKey="BasicSamples.FilteredLookupInDetail";import{Decorators as Et,Select2Editor as bt}from"@serenity-is/corelib";var C=class extends bt{constructor(e){super(e,null),this.addOption("key1","Text 1"),this.addOption("key2","Text 2"),this.addItem({id:"key3",text:"Text 3"}),this.addItem({id:"key4",text:"Text 4",disabled:!0})}};r(C,"HardcodedValuesEditor"),C=i([Et.registerEditor("Serenity.Demo.BasicSamples.HardcodedValuesEditor")],C);import{PrefixedContext as It}from"@serenity-is/corelib";import{initFormType as Ot}from"@serenity-is/corelib/q";var F=class extends It{constructor(e){if(super(e),!F.init){F.init=!0;var t=C;Ot(F,["SomeValue",t])}}},h=F;r(h,"HardcodedValuesForm"),h.formKey="BasicSamples.HarcodedValues";import{Decorators as Ce}from"@serenity-is/corelib";import{resolveUrl as Ie}from"@serenity-is/corelib/q";var c=class{format(e){var t=this.fileProperty?e.item[this.fileProperty]:e.value;if(!t||!t.length)return"";let o=Ie("~/upload/"+t);if(this.thumb){var s=t.split(".");t=s.slice(0,s.length-1).join(".")+"_t.jpg"}let m=Ie("~/upload/"+t);return`<a class="inline-image" target='_blank' href="${o}"><img src="${m}" style='max-height: 145px; max-width: 100%;' /></a>`}initializeColumn(e){this.fileProperty&&(e.referencedFields=e.referencedFields||[],e.referencedFields.push(this.fileProperty))}};r(c,"InlineImageFormatter"),i([Ce.option()],c.prototype,"fileProperty",2),i([Ce.option()],c.prototype,"thumb",2),c=i([Ce.registerFormatter("Serenity.Demo.BasicSamples.InlineImageFormatter")],c);var R=class{};r(R,"InlineImageInGridColumns"),R.columnsKey="BasicSamples.InlineImageInGrid";import{StringEditor as kt,ImageUploadEditor as Rt,BooleanEditor as Lt,LookupEditor as Nt,DecimalEditor as Ut,IntegerEditor as Ft,PrefixedContext as Kt}from"@serenity-is/corelib";import{Decorators as wt,LookupEditorBase as Tt}from"@serenity-is/corelib";import{CategoryRow as Bt}from"@serenity-is/demo.northwind";var D=class extends Tt{constructor(e,t){super(e,t)}getLookupKey(){return Bt.lookupKey}getItems(e){return super.getItems(e).filter(t=>t.CategoryName==="Produce"||t.CategoryName==="Seafood")}};r(D,"ProduceSeafoodCategoryEditor"),D=i([wt.registerEditor("Serenity.Demo.BasicSamples.ProduceSeafoodCategoryEditor")],D);import{initFormType as Qt}from"@serenity-is/corelib/q";var K=class extends Kt{constructor(e){if(super(e),!K.init){K.init=!0;var t=kt,o=Rt,s=Lt,m=Nt,n=D,k=Ut,l=Ft;Qt(K,["ProductName",t,"ProductImage",o,"Discontinued",s,"SupplierID",m,"CategoryID",n,"QuantityPerUnit",t,"UnitPrice",k,"UnitsInStock",l,"UnitsOnOrder",l,"ReorderLevel",l])}}},L=K;r(L,"LookupFilterByMultipleForm"),L.formKey="BasicSamples.LookupFilterByMultiple";import{CustomerEditor as Jt,OrderDetailsEditor as Vt}from"@serenity-is/demo.northwind";import{StringEditor as $t,DateEditor as At,LookupEditor as qt,PrefixedContext as Wt}from"@serenity-is/corelib";import{initFormType as _t}from"@serenity-is/corelib/q";var Q=class extends Wt{constructor(e){if(super(e),!Q.init){Q.init=!0;var t=Jt,o=$t,s=At,m=qt,n=Vt;_t(Q,["CustomerID",t,"CustomerContactName",o,"CustomerContactTitle",o,"CustomerCity",o,"CustomerRegion",o,"CustomerCountry",o,"CustomerPhone",o,"CustomerFax",o,"OrderDate",s,"RequiredDate",s,"EmployeeID",m,"DetailList",n])}}},v=Q;r(v,"PopulateLinkedDataForm"),v.formKey="BasicSamples.PopulateLinkedData";import{StaticTextBlock as Yt}from"@serenity-is/extensions";import{StringEditor as jt,PrefixedContext as zt}from"@serenity-is/corelib";import{initFormType as Mt}from"@serenity-is/corelib/q";var J=class extends zt{constructor(e){if(super(e),!J.init){J.init=!0;var t=Yt,o=jt;Mt(J,["StaticText",t,"SomeInput",o,"HtmlList",t,"FromLocalText",t,"DisplayFieldValue",t])}}},x=J;r(x,"StaticTextBlockForm"),x.formKey="BasicSamples.StaticTextBlock";import{Decorators as he,TemplatedDialog as Ht}from"@serenity-is/corelib";var Oe=["#4E79A7","#A0CBE8","#F28E2B","#FFBE7D","#59A14F","#8CD17D","#B6992D","#F1CE63","#499894","#86BCB6","#E15759","#FF9D9A","#79706E","#BAB0AC","#D37295","#FABFD2","#B07AA1","#D4A6C8","#9D7660","#D7B5A6"],S=class extends Ht{static initializePage(){$(function(){$("#LaunchDialogButton").click(function(t){new S().dialogOpen()})})}onDialogOpen(){super.onDialogOpen(),de.OrdersByShipper({},t=>{this.areaChart=new Chart(document.getElementById(this.idPrefix+"Chart"),{type:"bar",data:{labels:t.Values.map(o=>o.Month),datasets:t.ShipperKeys.map((o,s)=>({label:t.ShipperLabels[s],fill:!0,backgroundColor:Oe[s%Oe.length],data:t.Values.map((m,n)=>t.Values[n][o])}))}})})}getTemplate(){return"<canvas id='~_Chart'></div>"}getDialogOptions(){var t=super.getDialogOptions();return t.title="Orders by Shipper",t}};r(S,"ChartInDialog"),S=i([he.registerClass("Serenity.Demo.BasicSamples.ChartInDialog"),he.resizable(),he.maximizable()],S);import{Decorators as we}from"@serenity-is/corelib";import{endsWith as Xt}from"@serenity-is/corelib/q";import{ProductDialog as Zt}from"@serenity-is/demo.northwind";var P=class extends Zt{updateInterface(){super.updateInterface(),this.cloneButton.toggle(this.isEditMode())}getCloningEntity(){var e=super.getCloningEntity(),t=" (Clone)";return Xt(e.ProductName||"",t)||(e.ProductName=(e.ProductName||"")+t),e.ProductImage=null,e.UnitsInStock=0,e.UnitsOnOrder=0,e}};r(P,"CloneableEntityDialog"),P=i([we.registerClass("Serenity.Demo.BasicSamples.CloneableEntityDialog"),we.maximizable()],P);import{Decorators as Gt,EntityGrid as er}from"@serenity-is/corelib";import{ProductRow as Te,ProductColumns as tr,ProductService as rr}from"@serenity-is/demo.northwind";var V=class extends er{getColumnsKey(){return tr.columnsKey}getDialogType(){return P}getIdProperty(){return Te.idProperty}getLocalTextPrefix(){return Te.localTextPrefix}getService(){return rr.baseUrl}};r(V,"CloneableEntityGrid"),V=i([Gt.registerClass("Serenity.Demo.BasicSamples.CloneableEntityGrid")],V);import{Decorators as or}from"@serenity-is/corelib";import{formatDate as ir}from"@serenity-is/corelib/q";import{OrderGrid as sr,EmployeeRow as De,ShipperRow as Be,OrderDialog as ar,ProductRow as mr}from"@serenity-is/demo.northwind";var A=class extends sr{constructor(e){super(e)}addButtonClick(){this.editItem({CustomerID:"ANTON",RequiredDate:ir(new Date,"yyyy-MM-dd"),EmployeeID:De.getLookup().items.filter(e=>e.FullName==="Robert King")[0].EmployeeID,ShipVia:Be.getLookup().items.filter(e=>e.CompanyName==="Speedy Express")[0].ShipperID})}getButtons(){var e=super.getButtons();return e.push({title:"Add Order from the Queen",cssClass:"add-button",onClick:()=>{this.editItem({CustomerID:"QUEEN",EmployeeID:De.getLookup().items.filter(t=>t.FullName==="Nancy Davolio")[0].EmployeeID,ShipVia:Be.getLookup().items.filter(t=>t.CompanyName==="United Package")[0].ShipperID})}}),e.push({title:"Add Order with 5 Chai by Laura",cssClass:"add-note-button",onClick:()=>{var t=new ar;this.initDialog(t);var o=mr.getLookup().items.filter(m=>m.ProductName==="Chai")[0],s=De.getLookup().items.filter(m=>m.FullName==="Laura Callahan")[0].EmployeeID;t.loadEntityAndOpenDialog({CustomerID:"GOURL",EmployeeID:s,DetailList:[{ProductID:o.ProductID,ProductName:o.ProductName,UnitPrice:o.UnitPrice,Quantity:5,LineTotal:o.UnitPrice*5}]})}}),e}};r(A,"DefaultValuesInNewGrid"),A=i([or.registerClass("Serenity.Demo.BasicSamples.DefaultValuesInNewGrid")],A);import{alertDialog as Re,confirmDialog as Le,informationDialog as nr,notifySuccess as fe,notifyInfo as pr,notifyError as cr,successDialog as lr,warningDialog as ur}from"@serenity-is/corelib/q";var ke;(e=>{function a(){dr(),fr(),yr(),gr(),Cr(),hr(),Dr()}e.initializePage=a,r(a,"initializePage")})(ke||(ke={}));function dr(){$("#ConfirmDialogButtons").click(()=>{Le("Click one of buttons, or close dialog with [x] on top right, i'll tell you what you did!",()=>{fe("You clicked YES. Great!")},{onNo:()=>{pr("You clicked NO. Why?")},onCancel:()=>{cr("You clicked X. Operation is cancelled. Will try again?")}})})}r(dr,"confirmDialogButtons");function fr(){$("#ConfirmWithCustomTitle").click(()=>{Le("This confirmation has a custom title",()=>{fe("Allright!")},{title:"Some Custom Confirmation Title"})})}r(fr,"confirmWithCustomTitle");function yr(){$("#Information").click(()=>{nr("What a nice day",()=>{fe("No problem!")})})}r(yr,"informationDialogSample");function gr(){$("#Success").click(()=>{lr("Operation complete",()=>{fe("Well done!")})})}r(gr,"successDialogSample");function Cr(){$("#Warning").click(()=>{ur("Hey, be careful!")})}r(Cr,"warningDialogSample");function hr(){$("#Alert").click(()=>{Re("Houston, we got a problem!")})}r(hr,"alertDialogSample");function Dr(){$("#AlertWithHtmlContent").click(()=>{Re("<h4>Here is some HTML content!</h4><ul><li>Item 1</li><li>Item 2</li ><li>Visit <a href='https://serenity.is/' target='_blank' style='color: #ddf'>https://serenity.is/</a>!</li></ul>",{htmlEncode:!1})})}r(Dr,"alertWithHtmlContent");import{Decorators as vr}from"@serenity-is/corelib";import{OrderDialog as xr}from"@serenity-is/demo.northwind";var q=class extends xr{constructor(){super()}updateInterface(){super.updateInterface(),this.deleteButton.hide(),this.applyChangesButton.hide()}onSaveSuccess(e){this.showSaveSuccessMessage(e)}};r(q,"EntityDialogAsPanel"),q=i([vr.panel()],q);import{Decorators as Sr}from"@serenity-is/corelib";import{notifySuccess as Pr,notifyInfo as Er}from"@serenity-is/corelib/q";import{CategoryDialog as br,CategoryService as Ir}from"@serenity-is/demo.northwind";var E=class extends br{onSaveSuccess(e){this.isNew()&&(Pr("Just inserted a category with ID: "+e.EntityId),Ir.Retrieve({EntityId:e.EntityId},t=>{Er("Looks like the category you added has name: "+t.Entity.CategoryName)}))}};r(E,"GetInsertedRecordIdDialog"),E=i([Sr.registerClass("Serenity.Demo.BasicSamples.GetInsertedRecordIdDialog")],E);import{Decorators as Or}from"@serenity-is/corelib";import{CategoryGrid as wr}from"@serenity-is/demo.northwind";var W=class extends wr{getDialogType(){return E}constructor(e){super(e)}};r(W,"GetInsertedRecordIdGrid"),W=i([Or.registerClass("Serenity.Demo.BasicSamples.GetInsertedRecordIdGrid")],W);import{Decorators as Tr,PropertyGrid as Br,TabsExtensions as Ne,Toolbar as kr}from"@serenity-is/corelib";import{first as Rr,getForm as Lr,isEmptyOrNull as Nr,notifySuccess as Ur,reloadLookup as Fr,localText as Kr,validateOptions as Qr}from"@serenity-is/corelib/q";import{OrderDialog as Jr,CustomerForm as Ue,CustomerRow as Fe,CustomerService as Ke}from"@serenity-is/demo.northwind";var b=class extends Jr{constructor(){super();this.customerPropertyGrid=new Br(this.byId("CustomerPropertyGrid"),{idPrefix:this.idPrefix+"_Customer_",items:Lr(Ue.formKey).filter(o=>o.name!="CustomerID"),useCategories:!0}),this.customerForm=new Ue(this.customerPropertyGrid.idPrefix),this.customerValidator=this.byId("CustomerForm").validate(Qr({}));var t=0;new kr(this.byId("CustomerToolbar"),{buttons:[{cssClass:"apply-changes-button",title:Kr("Controls.EntityDialog.SaveButton"),onClick:()=>{var o=this.getCustomerID();if(o&&this.customerValidator.form()){var s={};this.customerPropertyGrid.save(s),Ke.Update({EntityId:o,Entity:s},m=>{Fr(Fe.lookupKey),t++;try{this.form.CustomerID.element.change()}finally{t--}Ur("Saved customer details")})}}}]}),this.form.CustomerID.change(o=>{if(!t){var s=this.getCustomerID();if(Ne.setDisabled(this.tabs,"Customer",!s),!s){this.customerPropertyGrid.load({});return}Ke.Retrieve({EntityId:s},m=>{this.customerPropertyGrid.load(m.Entity)})}})}getCustomerID(){var t=this.form.CustomerID.value;return Nr(t)?null:Rr(Fe.getLookup().items,o=>o.CustomerID==t).ID}loadEntity(t){super.loadEntity(t),Ne.setDisabled(this.tabs,"Customer",!this.getCustomerID())}getTemplate(){return`<div id="~_Tabs" class="s-DialogContent">
    <ul>
        <li><a href="#~_TabOrder"><span>Order</span></a></li>
        <li><a href="#~_TabCustomer"><span>Customer</span></a></li>
    </ul>
    <div id="~_TabOrder" class="tab-pane s-TabOrder">
        <div id="~_Toolbar" class="s-DialogToolbar">
        </div>
        <div class="s-Form">
            <form id="~_Form" action="">
                <div class="fieldset">
                    <div id="~_PropertyGrid"></div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </div>
    <div id="~_TabCustomer" class="tab-pane s-TabCustomer">
        <div id="~_CustomerToolbar" class="s-DialogToolbar">
        </div>
        <div class="s-Form">
            <form id="~_CustomerForm" action="">
                <div class="fieldset">
                    <div id="~_CustomerPropertyGrid"></div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </div>
</div>`}};r(b,"OtherFormInTabDialog"),b=i([Tr.registerClass("Serenity.Demo.BasicSamples.OtherFormInTabDialog")],b);import{Decorators as Vr}from"@serenity-is/corelib";import{OrderGrid as $r}from"@serenity-is/demo.northwind";var _=class extends $r{getDialogType(){return b}constructor(e){super(e)}};r(_,"OtherFormInTabGrid"),_=i([Vr.registerClass("Serenity.Demo.BasicSamples.OtherFormInTabGrid")],_);import{Decorators as Ar,PropertyGrid as qr,TabsExtensions as Y}from"@serenity-is/corelib";import{first as Wr,getForm as _r,isEmptyOrNull as Yr,reloadLookup as jr,validateOptions as zr}from"@serenity-is/corelib/q";import{OrderDialog as Mr,CustomerForm as Qe,CustomerService as Je,CustomerRow as Ve}from"@serenity-is/demo.northwind";var I=class extends Mr{constructor(){super();this.selfChange=0;this.customerPropertyGrid=new qr(this.byId("CustomerPropertyGrid"),{items:_r(Qe.formKey).filter(t=>t.name!="CustomerID"&&t.name!="NoteList"),idPrefix:this.idPrefix+"_Customer_",useCategories:!0}),this.customerForm=new Qe(this.customerPropertyGrid.idPrefix),this.customerValidator=this.byId("CustomerForm").validate(zr({})),this.form.CustomerID.change(t=>{if(!this.selfChange){var o=this.getCustomerID();if(Y.setDisabled(this.tabs,"Customer",!o),!o){this.customerPropertyGrid.load({});return}Je.Retrieve({EntityId:o},s=>{this.customerPropertyGrid.load(s.Entity)})}})}getCustomerID(){var t=this.form.CustomerID.value;return Yr(t)?null:Wr(Ve.getLookup().items,o=>o.CustomerID==t).ID}loadEntity(t){super.loadEntity(t),Y.setDisabled(this.tabs,"Customer",!this.getCustomerID())}saveCustomer(t,o){var s=this.getCustomerID();if(!s)o(null);else{var m=Y.activeTabKey(this.tabs);if(Y.selectTab(this.tabs,"Customer"),!this.customerValidator.form())return!1;Y.selectTab(this.tabs,m);var n={};this.customerPropertyGrid.save(n),Je.Update({EntityId:s,Entity:n},k=>{jr(Ve.lookupKey),this.selfChange++;try{this.form.CustomerID.element.change()}finally{this.selfChange--}o(k)})}return!0}saveOrder(t){super.save(t)}saveAll(t){this.saveCustomer(t,o=>this.saveOrder(t))}save(t){this.saveAll(t)}getTemplate(){return`<div id="~_Toolbar" class="s-DialogToolbar">
</div>
<div id="~_Tabs" class="s-DialogContent">
    <ul>
        <li><a href="#~_TabOrder"><span>Order</span></a></li>
        <li><a href="#~_TabCustomer"><span>Customer</span></a></li>
    </ul>
    <div id="~_TabOrder" class="tab-pane s-TabOrder">
        <div class="s-Form">
            <form id="~_Form" action="">
                <div class="fieldset">
                    <div id="~_PropertyGrid"></div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </div>
    <div id="~_TabCustomer" class="tab-pane s-TabCustomer">
        <div class="s-Form">
            <form id="~_CustomerForm" action="">
                <div class="fieldset">
                    <div id="~_CustomerPropertyGrid"></div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </div>
</div>`}};r(I,"OtherFormOneBarDialog"),I=i([Ar.registerClass("Serenity.Demo.BasicSamples.OtherFormOneBarDialog")],I);import{Decorators as Hr}from"@serenity-is/corelib";import{OrderGrid as Xr}from"@serenity-is/demo.northwind";var j=class extends Xr{getDialogType(){return I}constructor(e){super(e)}};r(j,"OtherFormInTabOneBarGrid"),j=i([Hr.registerClass("Serenity.Demo.BasicSamples.OtherFormInTabOneBarGrid")],j);import{Decorators as Zr,EntityDialog as Gr}from"@serenity-is/corelib";import{first as eo,isEmptyOrNull as to}from"@serenity-is/corelib/q";import{OrderRow as ve,OrderService as ro,CustomerRow as oo,CustomerService as io}from"@serenity-is/demo.northwind";var O=class extends Gr{constructor(){super();this.form=new v(this.idPrefix);this.form.CustomerID.changeSelect2(t=>{var o=this.form.CustomerID.value;if(to(o)){this.setCustomerDetails({});return}var s=eo(oo.getLookup().items,m=>m.CustomerID==o).ID;io.Retrieve({EntityId:s},m=>{this.setCustomerDetails(m.Entity)})})}getFormKey(){return v.formKey}getIdProperty(){return ve.idProperty}getLocalTextPrefix(){return ve.localTextPrefix}getNameProperty(){return ve.nameProperty}getService(){return ro.baseUrl}setCustomerDetails(t){this.form.CustomerCity.value=t.City,this.form.CustomerContactName.value=t.ContactName,this.form.CustomerContactTitle.value=t.ContactTitle,this.form.CustomerCountry.value=t.Country,this.form.CustomerFax.value=t.Fax,this.form.CustomerPhone.value=t.Phone,this.form.CustomerRegion.value=t.Region}getCssClass(){return super.getCssClass()+" s-OrderDialog s-Demo-Northwind-OrderDialog"}};r(O,"PopulateLinkedDataDialog"),O=i([Zr.registerClass("Serenity.Demo.BasicSamples.PopulateLinkedDataDialog")],O);import{Decorators as so}from"@serenity-is/corelib";import{OrderGrid as ao}from"@serenity-is/demo.northwind";var z=class extends ao{getDialogType(){return O}constructor(e){super(e)}};r(z,"PopulateLinkedDataGrid"),z=i([so.registerClass("Serenity.Demo.BasicSamples.PopulateLinkedDataGrid")],z);import{Decorators as mo,EditorUtils as no}from"@serenity-is/corelib";import{indexOf as $e}from"@serenity-is/corelib/q";import{SupplierDialog as po}from"@serenity-is/demo.northwind";var w=class extends po{getToolbarButtons(){let e=super.getToolbarButtons();return e.splice($e(e,t=>t.cssClass=="save-and-close-button"),1),e.splice($e(e,t=>t.cssClass=="apply-changes-button"),1),e}updateInterface(){super.updateInterface(),no.setReadonly(this.element.find(".editor"),!0),this.element.find("sup").hide(),this.deleteButton.hide()}getEntityTitle(){if(this.isEditMode()){var e=super.getEntitySingular();let t=this.getEntityNameFieldValue()||"";return"View "+e+" ("+t+")"}else return"How did you manage to open this dialog in new record mode?"}updateTitle(){super.updateTitle()}};r(w,"ReadOnlyDialog"),w=i([mo.registerClass("Serenity.Demo.BasicSamples.ReadOnlyDialog")],w);import{Decorators as co}from"@serenity-is/corelib";import{indexOf as lo}from"@serenity-is/corelib/q";import{SupplierGrid as uo}from"@serenity-is/demo.northwind";var M=class extends uo{getDialogType(){return w}constructor(e){super(e)}getButtons(){var e=super.getButtons();return e.splice(lo(e,t=>t.cssClass=="add-button"),1),e}};r(M,"ReadOnlyGrid"),M=i([co.registerClass("Serenity.Demo.BasicSamples.ReadOnlyGrid")],M);import{Decorators as fo}from"@serenity-is/corelib";import{trimToNull as yo}from"@serenity-is/corelib/q";import{CustomerDialog as go,CustomerService as Co}from"@serenity-is/demo.northwind";var T=class extends go{constructor(){super(),this.form.CustomerID.element.on("keyup",e=>{e.which>=65&&e.which<=90&&this.getNextNumber()})}afterLoadEntity(){super.afterLoadEntity(),this.isNew()&&this.getNextNumber()}getNextNumber(){var e=yo(this.form.CustomerID.value);if(!e||e.length<=1){var t=(e||"C").toUpperCase();Co.GetNextNumber({Prefix:t,Length:5},o=>{this.form.CustomerID.value=o.Serial,this.form.CustomerID.element[0].setSelectionRange(t.length,o.Serial.length)})}}};r(T,"SerialAutoNumberDialog"),T=i([fo.registerClass("Serenity.Demo.BasicSamples.SerialAutoNumberDialog")],T);import{Decorators as ho}from"@serenity-is/corelib";import{CustomerGrid as Do}from"@serenity-is/demo.northwind";var H=class extends Do{getDialogType(){return T}constructor(e){super(e)}};r(H,"SerialAutoNumberGrid"),H=i([ho.registerClass("Serenity.Demo.BasicSamples.SerialAutoNumberGrid")],H);import{Decorators as vo}from"@serenity-is/corelib";import{toId as xo}from"@serenity-is/corelib/q";import{OrderDetailRow as So,ProductRow as Po}from"@serenity-is/demo.northwind";import{GridEditorDialog as Eo}from"@serenity-is/extensions";var X=class extends Eo{constructor(){super();this.form=new d(this.idPrefix),this.form.ProductID.changeSelect2(t=>{var o=xo(this.form.ProductID.value);o!=null&&(this.form.UnitPrice.value=Po.getLookup().itemById[o].UnitPrice)}),this.form.Discount.addValidationRule(this.uniqueName,t=>{var o=this.form.UnitPrice.value,s=this.form.Quantity.value,m=this.form.Discount.value;if(o!=null&&s!=null&&m!=null&&m>0&&m>=o*s)return"Discount can't be higher than total price!"})}getFormKey(){return d.formKey}getLocalTextPrefix(){return So.localTextPrefix}updateInterface(){super.updateInterface(),this.toolbar.findButton("apply-changes-button").hide(),this.toolbar.findButton("save-and-close-button").hide()}};r(X,"ChangingLookupTextDialog"),X=i([vo.registerClass("Serenity.Demo.BasicSamples.ChangingLookupTextDialog")],X);import{Decorators as bo,EntityDialog as Io}from"@serenity-is/corelib";import{toId as Oo}from"@serenity-is/corelib/q";import{OrderRow as xe,OrderService as wo}from"@serenity-is/demo.northwind";var B=class extends Io{constructor(){super();this.form=new g(this.idPrefix),this.form.CategoryID.change(t=>{this.form.DetailList.categoryID=Oo(this.form.CategoryID.value)})}getFormKey(){return g.formKey}getIdProperty(){return xe.idProperty}getLocalTextPrefix(){return xe.localTextPrefix}getNameProperty(){return xe.nameProperty}getService(){return wo.baseUrl}};r(B,"FilteredLookupInDetailDialog"),B=i([bo.registerClass("Serenity.Demo.BasicSamples.FilteredLookupInDetailDialog")],B);import{Decorators as To}from"@serenity-is/corelib";import{OrderGrid as Bo}from"@serenity-is/demo.northwind";var Z=class extends Bo{getDialogType(){return B}constructor(e){super(e)}};r(Z,"FilteredLookupInDetailGrid"),Z=i([To.registerClass("Serenity.Demo.BasicSamples.FilteredLookupInDetailGrid")],Z);import{Decorators as ko}from"@serenity-is/corelib";import{ProductDialog as Ro}from"@serenity-is/demo.northwind";var p=class extends Ro{getFormKey(){return L.formKey}};r(p,"LookupFilterByMultipleDialog"),p=i([ko.registerClass("Serenity.Demo.BasicSamples.LookupFilterByMultipleDialog")],p);import{Criteria as Lo,Decorators as No,EntityGrid as Uo}from"@serenity-is/corelib";import{ProductRow as Ae,ProductColumns as Fo,ProductService as Ko}from"@serenity-is/demo.northwind";var G=class extends Uo{getColumnsKey(){return Fo.columnsKey}getDialogType(){return p}getIdProperty(){return Ae.idProperty}getLocalTextPrefix(){return Ae.localTextPrefix}getService(){return Ko.baseUrl}constructor(e){super(e)}onViewSubmit(){if(!super.onViewSubmit())return!1;let e=this.view.params;return e.Criteria=Lo.and(e.Criteria,[["CategoryName"],"in",[["Produce","Seafood"]]]),!0}};r(G,"LookupFilterByMultipleGrid"),G=i([No.registerClass("Serenity.Demo.BasicSamples.LookupFilterByMultipleGrid")],G);import{Decorators as Qo,PropertyDialog as Jo}from"@serenity-is/corelib";import{notifySuccess as Vo}from"@serenity-is/corelib/q";var ee=class extends Jo{constructor(){super();this.form=new h(this.idPrefix);this.dialogTitle="Please select some value",this.form.SomeValue.changeSelect2(t=>{Vo("You selected item with key: "+this.form.SomeValue.value)})}getFormKey(){return h.formKey}};r(ee,"HardcodedValuesDialog"),ee=i([Qo.registerClass("Serenity.Demo.BasicSamples.HardcodedValuesDialog")],ee);import{Decorators as $o,PropertyDialog as Ao}from"@serenity-is/corelib";var te=class extends Ao{constructor(){super();this.form=new x(this.idPrefix);this.dialogTitle="A form with static text blocks"}getFormKey(){return x.formKey}loadInitialEntity(){this.propertyGrid.load({DisplayFieldValue:"This content comes from <b>the value</b> of <em>DisplayFieldValue</em> field."})}getDialogOptions(){var t=super.getDialogOptions();return t.width=650,t}};r(te,"StaticTextBlockDialog"),te=i([$o.registerClass("Serenity.Demo.BasicSamples.StaticTextBlockDialog")],te);import{Decorators as qo,LookupEditor as Wo}from"@serenity-is/corelib";import{confirmDialog as qe,count as _o,first as re,format as We,formatDate as Se,htmlEncode as Yo,notifyInfo as jo,notifySuccess as _e,toId as zo}from"@serenity-is/corelib/q";import{CustomerDialog as Mo,CustomerRow as Ho,OrderDialog as Pe,OrderGrid as Xo,OrderRow as Ye}from"@serenity-is/demo.northwind";var ye=Ye.Fields,oe=class extends Xo{constructor(e){super(e)}getColumns(){var e=super.getColumns();return re(e,t=>t.field==ye.CustomerCompanyName).format=t=>`<a href="javascript:;" class="customer-link">${t.escape()}</a>`,re(e,t=>t.field==ye.OrderDate).format=t=>`<a href="javascript:;" class="date-link">${t.escape(Se(t.value))}</a>`,re(e,t=>t.field==ye.EmployeeFullName).format=t=>`<a href="javascript:;" class="employee-link">${t.escape()}</a>`,re(e,t=>t.field==ye.ShipCountry).format=t=>`<a href="javascript:;" class="ship-country-link">${t.escape()}</a>`,e}onClick(e,t,o){if(super.onClick(e,t,o),!e.isDefaultPrevented()){var s=this.itemAt(t),m=$(e.target);if(m.hasClass("customer-link")){e.preventDefault();let l=We("<p>You have clicked an order from customer: {0}.</p><p>If you click Yes, i'll open Customer dialog.</p><p>If you click No, i'll open Order dialog.</p>",Yo(s.CustomerCompanyName));qe(l,()=>{var tt=re(Ho.getLookup().items,rt=>rt.CustomerID==s.CustomerID);new Mo().loadByIdAndOpenDialog(tt.ID)},{htmlEncode:!1,onNo:()=>{new Pe().loadByIdAndOpenDialog(s.OrderID)}})}else if(m.hasClass("date-link")){e.preventDefault();var n=_o(this.view.getItems(),l=>l.OrderDate==s.OrderDate);jo("You clicked an order from date "+Se(s.OrderDate)+". There are "+n+" orders from the same date that is loaded in grid at the moment")}else if(m.hasClass("employee-link"))e.preventDefault(),_e("You clicked an employee name, so i've opened a new Order Dialog from same customer with that employee prepopulated!"),new Pe().loadEntityAndOpenDialog({CustomerID:s.CustomerID,EmployeeID:s.EmployeeID});else if(m.hasClass("ship-country-link")){e.preventDefault(),_e("Let's filter the grid to orders from "+s.ShipCountry);var k=this.findQuickFilter(Wo,Ye.Fields.ShipCountry);k.value=s.ShipCountry,this.refresh()}}}editItem(e){if(typeof e=="string"){var t=this.view.getItemById(zo(e)),o=Se(t.OrderDate);qe(We("You clicked edit link for order with ID: {0} and Date: {1}. Should i open that order?",t.OrderID,o),()=>{new Pe().loadByIdAndOpenDialog(t.OrderID)})}else super.editItem(e)}};r(oe,"CustomLinksInGrid"),oe=i([qo.registerClass("Serenity.Demo.BasicSamples.CustomLinksInGrid")],oe);import{Decorators as Zo}from"@serenity-is/corelib";import{SupplierRow as je,SupplierColumns as Go,SupplierDialog as ei,SupplierService as ti}from"@serenity-is/demo.northwind";import{SelectableEntityGrid as ri}from"@serenity-is/extensions";var ie=class extends ri{getColumnsKey(){return Go.columnsKey}getDialogType(){return ei}getIdProperty(){return je.idProperty}getLocalTextPrefix(){return je.localTextPrefix}getService(){return ti.baseUrl}};r(ie,"RowSelectionGrid"),ie=i([Zo.registerClass("Serenity.Demo.BasicSamples.RowSelectionGrid")],ie);import{Criteria as oi,Decorators as ii,EntityGrid as si}from"@serenity-is/corelib";import{ProductRow as ze,ProductColumns as ai,ProductDialog as mi,ProductService as ni}from"@serenity-is/demo.northwind";var se=class extends si{getColumnsKey(){return ai.columnsKey}getDialogType(){return mi}getIdProperty(){return ze.idProperty}getLocalTextPrefix(){return ze.localTextPrefix}getService(){return ni.baseUrl}onViewSubmit(){if(!super.onViewSubmit())return!1;var e=this.view.params;return e.Criteria=oi.and(e.Criteria,[["UnitsInStock"],">",10],[["CategoryName"],"!=","Condiments"],[["Discontinued"],"=",0]),!0}};r(se,"GridFilteredByCriteria"),se=i([ii.registerClass("Serenity.Demo.BasicSamples.GridFilteredByCriteria")],se);import{Decorators as pi,EntityGrid as ci}from"@serenity-is/corelib";import{coalesce as Me,first as He,formatNumber as li}from"@serenity-is/corelib/q";import{ProductRow as Xe,ProductColumns as ui,ProductService as di}from"@serenity-is/demo.northwind";import{Aggregators as ge}from"@serenity-is/corelib/slick";import{GroupItemMetadataProvider as fi}from"@serenity-is/sleekgrid";var ae=class extends ci{getColumnsKey(){return ui.columnsKey}getDialogType(){return p}getIdProperty(){return Xe.idProperty}getLocalTextPrefix(){return Xe.localTextPrefix}getService(){return di.baseUrl}constructor(e){super(e)}createSlickGrid(){var e=super.createSlickGrid();return e.registerPlugin(new fi),this.view.setSummaryOptions({aggregators:[new ge.Avg("UnitPrice"),new ge.Sum("UnitsInStock"),new ge.Max("UnitsOnOrder"),new ge.Avg("ReorderLevel")]}),e}getColumns(){var e=super.getColumns();return He(e,t=>t.field==="UnitsOnOrder").groupTotalsFormatter=(t,o)=>t.max?"max: "+Me(t.max[o.field],""):"",He(e,t=>t.field==="ReorderLevel").groupTotalsFormatter=(t,o)=>t.avg?"avg: "+Me(li(t.avg[o.field],"0."),""):"",e}getSlickOptions(){var e=super.getSlickOptions();return e.showFooterRow=!0,e}usePager(){return!1}getButtons(){return[{title:"Group By Category",cssClass:"expand-all-button",onClick:()=>this.view.setGrouping([{getter:"CategoryName"}])},{title:"Group By Category and Supplier",cssClass:"expand-all-button",onClick:()=>this.view.setGrouping([{formatter:e=>"Category: "+e.value+" ("+e.count+" items)",getter:"CategoryName"},{formatter:e=>"Supplier: "+e.value+" ("+e.count+" items)",getter:"SupplierCompanyName"}])},{title:"No Grouping",cssClass:"collapse-all-button",onClick:()=>this.view.setGrouping([])}]}};r(ae,"GroupingAndSummariesInGrid"),ae=i([pi.registerClass("Serenity.Demo.BasicSamples.GroupingAndSummariesInGrid")],ae);import{DateEditor as yi,Decorators as gi,LookupEditor as Ci}from"@serenity-is/corelib";import{first as Ze}from"@serenity-is/corelib/q";import{OrderRow as hi,OrderGrid as Di,OrderShippingState as vi}from"@serenity-is/demo.northwind";var Ee=hi.Fields,me=class extends Di{constructor(e){super(e)}getQuickFilters(){let e=super.getQuickFilters();return Ze(e,t=>t.field==Ee.OrderDate).init=t=>{t.valueAsDate=new Date(2010,4,1);let o=t.element.nextAll(".s-DateEditor").getWidget(yi);o.valueAsDate=new Date(2020,6,1)},Ze(e,t=>t.field==Ee.ShippingState).init=t=>{t.value=vi.NotShipped.toString()},e}createQuickFilters(){super.createQuickFilters(),this.findQuickFilter(Ci,Ee.ShipVia).values=["1","2"]}};r(me,"InitialValuesForQuickFilters"),me=i([gi.registerClass("Serenity.Demo.BasicSamples.InitialValuesForQuickFilters")],me);import{Decorators as xi}from"@serenity-is/corelib";import{confirmDialog as Si}from"@serenity-is/corelib/q";import{CustomerGrid as Pi,CustomerService as Ei,OrderDialog as bi}from"@serenity-is/demo.northwind";var ne=class extends Pi{constructor(e){super(e)}getColumns(){var e=super.getColumns();return e.unshift({field:"Delete Row",name:"",format:t=>'<a class="inline-action delete-row" title="delete"><i class="fa fa-trash-o text-red"></i></a>',width:24,minWidth:24,maxWidth:24}),e.splice(1,0,{field:"View Details",name:"",format:t=>`<a class="inline-action view-details" title="view details">
                    <i class="fa fa-search"></i></a>`,width:24,minWidth:24,maxWidth:24}),e.splice(2,0,{field:"New Order",name:"",format:t=>`<a class="inline-action new-order text-purple" title="new order">
                    <i class="fa fa-cart-plus"></i></a>`,width:24,minWidth:24,maxWidth:24}),e}onClick(e,t,o){if(super.onClick(e,t,o),!e.isDefaultPrevented()){var s=this.itemAt(t),m=$(e.target);if(m.parent().hasClass("inline-action")&&(m=m.parent()),m.hasClass("inline-action")){if(e.preventDefault(),m.hasClass("delete-row"))Si("Delete record?",()=>{Ei.Delete({EntityId:s.ID},k=>{this.refresh()})});else if(m.hasClass("view-details"))this.editItem(s.ID);else if(m.hasClass("new-order")){var n=new bi;this.initDialog(n),n.loadEntityAndOpenDialog({CustomerID:s.CustomerID})}}}}};r(ne,"InlineActionGrid"),ne=i([xi.registerClass("Serenity.Demo.BasicSamples.InlineActionGrid")],ne);import{Decorators as Ii,EntityGrid as Oi}from"@serenity-is/corelib";import{ProductRow as Ge,ProductDialog as wi,ProductService as Ti}from"@serenity-is/demo.northwind";var pe=class extends Oi{getColumnsKey(){return R.columnsKey}getDialogType(){return wi}getIdProperty(){return Ge.idProperty}getLocalTextPrefix(){return Ge.localTextPrefix}getService(){return Ti.baseUrl}constructor(e){super(e)}getSlickOptions(){let e=super.getSlickOptions();return e.rowHeight=150,e}};r(pe,"InlineImageInGrid"),pe=i([Ii.registerClass("Serenity.Demo.BasicSamples.InlineImageInGrid")],pe);import{Decorators as Bi}from"@serenity-is/corelib";import{indexOf as ki}from"@serenity-is/corelib/q";import{SupplierGrid as Ri}from"@serenity-is/demo.northwind";var ce=class extends Ri{constructor(e){super(e)}getButtons(){var e=super.getButtons();return e.splice(ki(e,t=>t.cssClass=="add-button"),1),e}};r(ce,"RemovingAddButton"),ce=i([Bi.registerClass("Serenity.Demo.BasicSamples.RemovingAddButton")],ce);import{Decorators as Li,EntityGrid as Ni}from"@serenity-is/corelib";import{SalesByCategoryRow as et,SalesByCategoryColumns as Ui,SalesByCategoryService as Fi}from"@serenity-is/demo.northwind";var le=class extends Ni{constructor(t){super(t);this.nextId=1}getColumnsKey(){return Ui.columnsKey}getIdProperty(){return"__id"}getNameProperty(){return et.nameProperty}getLocalTextPrefix(){return et.localTextPrefix}getService(){return Fi.baseUrl}onViewProcessData(t){t=super.onViewProcessData(t);for(var o of t.Entities)o.__id=this.nextId++;return t}getButtons(){return[]}};r(le,"ViewWithoutIDGrid"),le=i([Li.registerClass("Serenity.Demo.BasicSamples.ViewWithoutIDGrid")],le);import{Decorators as Ki}from"@serenity-is/corelib";import{OrderGrid as Qi}from"@serenity-is/demo.northwind";var ue=class extends Qi{constructor(e){super(e)}};r(ue,"WrappedHeadersGrid"),ue=i([Ki.registerClass("Serenity.Demo.BasicSamples.WrappedHeadersGrid")],ue);export{de as BasicSamplesService,X as ChangingLookupTextDialog,u as ChangingLookupTextEditor,d as ChangingLookupTextForm,S as ChartInDialog,P as CloneableEntityDialog,V as CloneableEntityGrid,oe as CustomLinksInGrid,A as DefaultValuesInNewGrid,ke as DialogBoxes,q as EntityDialogAsPanel,y as FilteredLookupDetailEditor,B as FilteredLookupInDetailDialog,g as FilteredLookupInDetailForm,Z as FilteredLookupInDetailGrid,f as FilteredLookupOrderDetailDialog,E as GetInsertedRecordIdDialog,W as GetInsertedRecordIdGrid,se as GridFilteredByCriteria,ae as GroupingAndSummariesInGrid,ee as HardcodedValuesDialog,C as HardcodedValuesEditor,h as HardcodedValuesForm,me as InitialValuesForQuickFilters,ne as InlineActionGrid,c as InlineImageFormatter,pe as InlineImageInGrid,R as InlineImageInGridColumns,p as LookupFilterByMultipleDialog,L as LookupFilterByMultipleForm,G as LookupFilterByMultipleGrid,b as OtherFormInTabDialog,_ as OtherFormInTabGrid,j as OtherFormInTabOneBarGrid,I as OtherFormOneBarDialog,O as PopulateLinkedDataDialog,v as PopulateLinkedDataForm,z as PopulateLinkedDataGrid,D as ProduceSeafoodCategoryEditor,w as ReadOnlyDialog,M as ReadOnlyGrid,ce as RemovingAddButton,ie as RowSelectionGrid,T as SerialAutoNumberDialog,H as SerialAutoNumberGrid,te as StaticTextBlockDialog,x as StaticTextBlockForm,le as ViewWithoutIDGrid,ue as WrappedHeadersGrid};
//# sourceMappingURL=index.js.map
